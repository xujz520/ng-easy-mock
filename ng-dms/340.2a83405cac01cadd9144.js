(self.webpackChunkng_dms=self.webpackChunkng_dms||[]).push([[340],{9340:(t,e,n)=>{"use strict";n.r(e),n.d(e,{SummernoteModule:()=>y});var s=n(8583),o=n(3423),i=n(1679),r=n(7716),l=n(9390),a=n(8035),c=n(6595),h=n(1733),m=n(9101),d=n(1841);const u=["container"];let p=(()=>{class t{constructor(t,e,n){this.toolService=t,this.http=e,this.ngZone=n,this.config={},this.defaultConfig={lang:"zh-CN",height:320,placeholder:"\u5728\u8fd9\u91cc\u8fdb\u884c\u521b\u4f5c...",callbacks:{}},this.$note=null,this.inited=new r.vpe,this.html="",this.htmlChange=new r.vpe}get _config(){return this.config.callbacks=Object.assign({},this.defaultConfig.callbacks,this.config.callbacks),Object.assign({},this.defaultConfig,this.config)}ngOnChanges(t){t.html&&this.$note&&this.$note.summernote("code")!=this.html&&this.$note.summernote("code",this.html)}ngOnInit(){}ngAfterViewInit(){this.toolService.require([{path:"./assets/lib/summernote/summernote_bootstrap.css"},{path:"./assets/lib/summernote/summernote.min.css"},{path:"./assets/lib/summernote/summernote-zh-CN.min.js",deps:[{path:"./assets/lib/summernote/summernote.min.js",deps:[{path:"./assets/lib/summernote/bootstrap.min.js",deps:[{path:"./assets/lib/summernote/jquery.min.js"}]}]}]}]).then(()=>{const t=window.jQuery;this.ngZone.runOutsideAngular(()=>{this.$note=t(this.container.nativeElement).summernote(this._config),setTimeout(()=>{this.$note.summernote("code",this.html),this.inited.emit(this.$note)},0),this.$note.on("summernote.change",(t,e,n)=>{this.ngZone.run(()=>{this.html=e,this.htmlChange.emit(this.html)})})})})}ngOnDestroy(){this.$note&&this.$note.summernote("destroy")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(l.oN),r.Y36(d.eN),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["summernote"]],viewQuery:function(t,e){if(1&t&&r.Gf(u,7),2&t){let t;r.iGM(t=r.CRH())&&(e.container=t.first)}},inputs:{config:"config",html:"html"},outputs:{inited:"inited",htmlChange:"htmlChange"},features:[r.TTD],decls:2,vars:0,consts:[["container",""]],template:function(t,e){1&t&&r._UZ(0,"textarea",null,0)},styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0}),t})();var g=n(4453),b=n(9374),f=n(4514),z=n(8542),C=n(9075);let Z=(()=>{class t{constructor(t){this.sanitizer=t,this.html=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(C.H7))},t.\u0275cmp=r.Xpm({type:t,selectors:[["summernote-preview"]],inputs:{html:"html"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,e){1&t&&r._UZ(0,"div",0),2&t&&r.Q6J("innerHTML",e.sanitizer.bypassSecurityTrustHtml(e.html),r.oJD)},styles:["[_nghost-%COMP%]     blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}[_nghost-%COMP%]     blockquote ol:last-child, [_nghost-%COMP%]     blockquote p:last-child, [_nghost-%COMP%]     blockquote ul:last-child{margin-bottom:0}[_nghost-%COMP%]     pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}[_nghost-%COMP%]     .table-bordered{border:1px solid #ddd}[_nghost-%COMP%]     .table{width:100%;max-width:100%;margin-bottom:20px}[_nghost-%COMP%]     table{background-color:initial}[_nghost-%COMP%]     table{border-spacing:0;border-collapse:collapse}[_nghost-%COMP%]     .table-bordered>tbody>tr>td, [_nghost-%COMP%]     .table-bordered>tbody>tr>th, [_nghost-%COMP%]     .table-bordered>tfoot>tr>td, [_nghost-%COMP%]     .table-bordered>tfoot>tr>th, [_nghost-%COMP%]     .table-bordered>thead>tr>td, [_nghost-%COMP%]     .table-bordered>thead>tr>th{border:1px solid #ddd}[_nghost-%COMP%]     .table>tbody>tr>td, [_nghost-%COMP%]     .table>tbody>tr>th, [_nghost-%COMP%]     .table>tfoot>tr>td, [_nghost-%COMP%]     .table>tfoot>tr>th, [_nghost-%COMP%]     .table>thead>tr>td, [_nghost-%COMP%]     .table>thead>tr>th{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}"],changeDetection:0}),t})();function _(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"summernote-preview",4),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("html",t.html)}}let k=(()=>{class t{constructor(){this.html="",this.isVisible=!1}ngOnInit(){}setHtml(){this.html=window.prompt("\u8bf7\u8f93\u5165html\u5b57\u7b26\u4e32: ",'<h1 style="color: #53c0ea;">summernote</h1>')||""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-summernote-base"]],decls:9,vars:4,consts:[[3,"html","htmlChange"],["nz-button","","nzType","default",3,"click"],["nzTitle","\u9884\u89c8",3,"nzVisible","nzFooter","nzWidth","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[3,"html"]],template:function(t,e){1&t&&(r.TgZ(0,"summernote",0),r.NdJ("htmlChange",function(t){return e.html=t}),r.qZA(),r._UZ(1,"br"),r.TgZ(2,"button",1),r.NdJ("click",function(){return e.isVisible=!0}),r._uU(3,"\u9884\u89c8"),r.qZA(),r._uU(4,"\xa0 "),r.TgZ(5,"button",1),r.NdJ("click",function(){return e.setHtml()}),r._uU(6,"\u586b\u5145HTML"),r.qZA(),r.TgZ(7,"nz-modal",2),r.NdJ("nzVisibleChange",function(t){return e.isVisible=t})("nzOnCancel",function(){return e.isVisible=!1}),r.YNc(8,_,2,1,"ng-container",3),r.qZA()),2&t&&(r.Q6J("html",e.html),r.xp6(7),r.Q6J("nzVisible",e.isVisible)("nzFooter",null)("nzWidth",850))},directives:[p,g.ix,b.dQ,f.w,z.du,z.Hf,Z],encapsulation:2}),t})();var O=n(8058);function T(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"summernote",3),r.NdJ("htmlChange",function(e){return r.CHM(t),r.oxw().html=e})("inited",function(e){return r.CHM(t),r.oxw().$note=e}),r.qZA(),r.BQk()}if(2&t){const t=r.oxw();r.xp6(1),r.Q6J("html",t.html)}}let x=(()=>{class t{constructor(t,e){this.http=t,this.msg=e,this.html="",this.loading=!1,this.isVisible=!1}ngOnInit(){}submit(){if(this.$note.summernote("isEmpty"))return void this.msg.warning("\u8bf7\u8f93\u5165\u5185\u5bb9!");let t={html:this.html};this.loading=!0,this.http.post("/post",t).subscribe(t=>{this.loading=!1,0==t.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.isVisible=!1)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(d.eN),r.Y36(O.dD))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-summernote-dialog"]],decls:4,vars:5,consts:[["nz-button","","nzType","default",3,"click"],["nzTitle","\u5bf9\u8bdd\u6846\u4e2d\u7684\u7f16\u8f91\u5668",3,"nzWidth","nzMaskClosable","nzKeyboard","nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"html","htmlChange","inited"]],template:function(t,e){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return e.html="",e.isVisible=!0}),r._uU(1,"\u6253\u5f00\u5bf9\u8bdd\u6846"),r.qZA(),r.TgZ(2,"nz-modal",1),r.NdJ("nzVisibleChange",function(t){return e.isVisible=t})("nzOnCancel",function(){return e.isVisible=!1})("nzOnOk",function(){return e.submit()}),r.YNc(3,T,2,1,"ng-container",2),r.qZA()),2&t&&(r.xp6(2),r.Q6J("nzWidth",850)("nzMaskClosable",!1)("nzKeyboard",!1)("nzVisible",e.isVisible)("nzOkLoading",e.loading))},directives:[g.ix,b.dQ,f.w,z.du,z.Hf,p],encapsulation:2}),t})(),M=(()=>{class t{constructor(t){this.http=t,this.html="\u8bf7\u5c1d\u8bd5\u5728\u8fd9\u91cc\u7c98\u8d34\u622a\u56fe",this.config={callbacks:{onImageUpload:t=>{let e=new FormData;e.append("file",t[0]),this.http.post("/upload",e).subscribe(t=>{0==t.code&&this.$note.summernote("insertImage",t.data.url)})}}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(d.eN))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-summernote-upload"]],decls:1,vars:2,consts:[[3,"html","config","htmlChange","inited"]],template:function(t,e){1&t&&(r.TgZ(0,"summernote",0),r.NdJ("htmlChange",function(t){return e.html=t})("inited",function(t){return e.$note=t}),r.qZA()),2&t&&r.Q6J("html",e.html)("config",e.config)},directives:[p],encapsulation:2}),t})();const w=[{path:"",pathMatch:"full",redirectTo:"index"},{path:"index",component:(()=>{class t{constructor(t){this.doc=t}ngOnInit(){}onMdLoad(){this.doc.scrollIntoView()}nzAnchorClick(t){this.doc.setAnchor(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(l.R7))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-summernote"]],decls:26,vars:3,consts:[["docPage",""],[3,"nzContainer","nzAffix","nzClick"],["nzHref","#\u57fa\u672c","nzTitle","\u57fa\u672c"],["nzHref","#\u5728\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528","nzTitle","\u5728\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528"],["nzHref","#\u56fe\u7247\u4e0a\u4f20","nzTitle","\u56fe\u7247\u4e0a\u4f20"],["nzHref","#md-api","nzTitle","API"],["nzHref","#md-\u9ed8\u8ba4\u914d\u7f6e-defaultconfig","nzTitle","\u9ed8\u8ba4\u914d\u7f6e"],["nzHref","#md-\u5bcc\u6587\u672c\u6e32\u67d3","nzTitle","\u5bcc\u6587\u672c\u6e32\u67d3"],[3,"md"],[2,"display","none"],["intro",""],["id","\u57fa\u672c",2,"margin-top","0"],["cardTitle","\u57fa\u672c","codeUrl","./assets/docs/summernote/summernote-base.component.ts"],["id","\u5728\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528"],["cardTitle","\u5728\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528","desc","\u5728\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528","codeUrl","./assets/docs/summernote/summernote-dialog.component.ts"],["id","\u56fe\u7247\u4e0a\u4f20"],["cardTitle","\u56fe\u7247\u4e0a\u4f20","desc","\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5bf9\u56fe\u7247\u8fdb\u884cbase64\u7f16\u7801, \u4f60\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u6587\u4ef6\u4e0a\u4f20\u63a5\u53e3","codeUrl","./assets/docs/summernote/summernote-upload.component.ts"],["md","./assets/docs/summernote/api.md",3,"load"]],template:function(t,e){if(1&t&&(r.TgZ(0,"doc-page",null,0),r.TgZ(2,"nz-anchor",1),r.NdJ("nzClick",function(t){return e.nzAnchorClick(t)}),r._UZ(3,"nz-link",2),r._UZ(4,"nz-link",3),r._UZ(5,"nz-link",4),r.TgZ(6,"nz-link",5),r._UZ(7,"nz-link",6),r._UZ(8,"nz-link",7),r.qZA(),r.qZA(),r.TgZ(9,"doc-md-preview",8),r.TgZ(10,"textarea",9,10),r._uU(12,'# Summernote \n`bootstrap` \u98ce\u683c\u5bcc\u6587\u672c\u7ec4\u4ef6, \u57fa\u4e8e <a target="_blank" href="https://summernote.org/">Summernote v0.8.18</a>\n    '),r.qZA(),r.qZA(),r.TgZ(13,"h3",11),r._uU(14,"\u57fa\u672c"),r.qZA(),r.TgZ(15,"example-card",12),r._UZ(16,"app-summernote-base"),r.qZA(),r.TgZ(17,"h3",13),r._uU(18,"\u5728\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528"),r.qZA(),r.TgZ(19,"example-card",14),r._UZ(20,"app-summernote-dialog"),r.qZA(),r.TgZ(21,"h3",15),r._uU(22,"\u56fe\u7247\u4e0a\u4f20"),r.qZA(),r.TgZ(23,"example-card",16),r._UZ(24,"app-summernote-upload"),r.qZA(),r.TgZ(25,"doc-md-preview",17),r.NdJ("load",function(){return e.onMdLoad()}),r.qZA(),r.qZA()),2&t){const t=r.MAs(1),e=r.MAs(11);r.xp6(2),r.Q6J("nzContainer",t.page)("nzAffix",!1),r.xp6(7),r.Q6J("md",e.value)}},directives:[a.i,c.IT,c.Fp,h.M,m.w,k,x,M],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.ez,i.m,o.Bz.forChild(w)]]}),t})()}}]);