(self.webpackChunkng_dms=self.webpackChunkng_dms||[]).push([[774],{1774:(e,n,t)=>{"use strict";t.r(n),t.d(n,{SystemModule:()=>Re});var o=t(8583),i=t(3423),r=t(1679),l=t(665),a=t(703),s=t(4453),g=t(3599),d=t(7018),c=t(1398),u=t(7674),p=t(2079),f=t(8453),h=t(269),Z=t(8058),m=t(8542),z=t(1729),b=t(2995),x=t(7420),T=t(8381),M=t(4401),A=t(7716);let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[o.ez,l.u5,l.UX,a.xu,s.sL,g.PV,d.vh,c.aF,u.o7,p.Wr,f.m,h.LV,Z.gR,m.Qp,z.j,b.cq,x.cg,T.$6,M.b1]]}),e})();var q=t(7606),C=t(1308),y=t(4514),w=t(9374),J=t(7850),v=t(9628),O=t(4812),U=t(5887),N=t(6704);const k=["tree"];function P(e,n){if(1&e){const e=A.EpF();A.ynx(0),A.TgZ(1,"li",15),A.NdJ("click",function(){const n=A.CHM(e).$implicit;return A.oxw().activeRole(n)}),A.TgZ(2,"span"),A._uU(3),A.qZA(),A.TgZ(4,"nz-button-group",16),A.TgZ(5,"button",17),A.NdJ("click",function(n){const t=A.CHM(e).$implicit;return A.oxw().openRoleDialog(t),n.stopPropagation()}),A._UZ(6,"i",18),A.qZA(),A.TgZ(7,"button",19),A.NdJ("nzOnConfirm",function(){const n=A.CHM(e).$implicit;return A.oxw().removeRole(n)})("click",function(e){return e.stopPropagation()}),A._UZ(8,"i",20),A.qZA(),A.qZA(),A.qZA(),A.BQk()}if(2&e){const e=n.$implicit,t=A.oxw();A.xp6(1),A.ekj("isActive",e==t.activedRole),A.xp6(2),A.Oqu(e.name)}}function D(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"button",21),A.NdJ("click",function(){return A.CHM(e),A.oxw().openRoleDialog()}),A._UZ(1,"i",22),A.TgZ(2,"span"),A._uU(3,"\u6dfb\u52a0\u89d2\u8272"),A.qZA(),A.qZA()}}function Q(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"span",23),A._uU(1),A.qZA(),A.TgZ(2,"a",24),A.NdJ("click",function(){return A.CHM(e),A.oxw().toggleChecked()}),A._UZ(3,"i",25),A.qZA(),A.TgZ(4,"a",26),A.NdJ("click",function(){return A.CHM(e),A.oxw().toggleExpand()}),A._UZ(5,"i",27),A.qZA()}if(2&e){const e=A.oxw();A.xp6(1),A.Oqu(null==e.activedRole?null:e.activedRole.name)}}function S(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"button",21),A.NdJ("click",function(){return A.CHM(e),A.oxw().onSaveRoleAuth()}),A._UZ(1,"i",28),A.TgZ(2,"span"),A._uU(3,"\u4fdd\u5b58\u6743\u9650"),A.qZA(),A.qZA()}}const L=function(){return[]};function K(e,n){if(1&e&&A._UZ(0,"nz-tree",29,30),2&e){const e=A.oxw();A.Q6J("nzData",e.nodes||A.DdM(2,L))("nzCheckedKeys",e.checkedKeys)}}function F(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"a",24),A.NdJ("click",function(n){A.CHM(e);const t=A.oxw().index,o=A.MAs(2);return A.oxw(2).toggleChecked(o,t),n.stopPropagation()}),A._UZ(1,"i",25),A.qZA(),A.TgZ(2,"a",26),A.NdJ("click",function(n){A.CHM(e);const t=A.oxw().index,o=A.MAs(2);return A.oxw(2).toggleExpand(o,t),n.stopPropagation()}),A._UZ(3,"i",27),A.qZA()}}function B(e,n){if(1&e&&(A.TgZ(0,"nz-collapse-panel",33),A._UZ(1,"nz-tree",29,30),A.YNc(3,F,4,0,"ng-template",null,34,A.W1O),A.qZA()),2&e){const e=n.$implicit,t=A.MAs(4),o=A.oxw(2);A.Q6J("nzHeader",e.name)("nzActive",!0)("nzExtra",t),A.xp6(1),A.Q6J("nzData",e.children||A.DdM(5,L))("nzCheckedKeys",o.checkedKeys)}}function E(e,n){if(1&e&&(A.TgZ(0,"nz-collapse",31),A.YNc(1,B,5,6,"nz-collapse-panel",32),A.qZA()),2&e){const e=A.oxw();A.xp6(1),A.Q6J("ngForOf",e.nodes)}}const H=function(){return{standalone:!0}};function Y(e,n){if(1&e){const e=A.EpF();A.ynx(0),A.TgZ(1,"form",35),A.TgZ(2,"nz-form-item",36),A.TgZ(3,"nz-form-label",37),A._uU(4,"\u89d2\u8272\u540d\u79f0"),A.qZA(),A.TgZ(5,"nz-form-control",38),A.TgZ(6,"input",39),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().roleDialog.formData.name=n}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.BQk()}if(2&e){const e=A.oxw();A.xp6(6),A.Q6J("ngModel",e.roleDialog.formData.name)("ngModelOptions",A.DdM(2,H))}}let j=(()=>{class e{constructor(e,n,t,o,i){this.toolService=e,this.http=n,this.msg=t,this.appService=o,this.elementRef=i,this.loading=!1,this.roles=[],this.activedRole=null,this.roleDialog={display:!1,loading:!1,roleData:null,formData:{}},this.nzTreeList=[],this.nodes=[],this.checkedKeys=[],this.loading=!0,Promise.all([this.loadRoles(),this.loadNodes()]).then(([])=>{this.loading=!1,this.activeRole(this.roles[0])})}ngOnInit(){}loadRoles(){return this.http.get("/role/list").toPromise().then(e=>{0==e.code&&(this.roles=e.data||[])})}loadNodes(){return this.http.get("./assets/menu.json").toPromise().then(e=>{0==e.code&&(this.nodes=e.data||[],this.nodes=this.toolService.recursion(this.nodes,null,e=>{var n;return!(!e.acl&&!(null===(n=e.children)||void 0===n?void 0:n.length))}),this.nodes=this.toolService.recursion(this.nodes,(e,n,t,o)=>{var i,r;e.title=e.name,e.isLeaf=!(null===(i=e.children)||void 0===i?void 0:i.length),e.key=e.acl,(null===(r=e.children)||void 0===r?void 0:r.length)&&(e._key=e.acl,e.key=`_tempKey_${o}_${n}`),this.appService.isEnabledModule?2==o&&(e.expanded=!0):1==o&&(e.expanded=!0)}))})}activeRole(e){this.activedRole=e,this.checkedKeys=(null==e?void 0:e.auths)||[]}openRoleDialog(e=null){this.roleDialog.display=!0,this.roleDialog.roleData=e,this.roleDialog.formData=e?Object.assign({},e):{}}roleDialogOk(){let e=this.roleDialog.formData;if(!e.name)return;let n="";if(this.roleDialog.roleData){if(n="/role/update",this.roles.find(n=>n.id!=e.id&&n.name==e.name))return void this.msg.info("\u8be5\u89d2\u8272\u540d\u5df2\u5b58\u5728, \u8bf7\u66f4\u6362!")}else if(n="/role/add",this.roles.find(n=>n.name==e.name))return void this.msg.info("\u8be5\u89d2\u8272\u540d\u5df2\u5b58\u5728, \u8bf7\u66f4\u6362!");this.roleDialog.loading=!0,this.http.post(`${n}`,e).subscribe(n=>{this.roleDialog.loading=!1,0==n.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.roleDialog.display=!1,this.loading=!0,this.loadRoles().then(()=>{this.loading=!1,this.activeRole(this.roles.find(n=>n.name==e.name))}))})}removeRole(e){this.loading=!0,this.http.post("/role/delete",e).subscribe(n=>{this.loading=!1,0==n.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.roles.splice(this.roles.indexOf(e),1),e==this.activedRole&&(this.activedRole=null))})}onSaveRoleAuth(){let e=[];this.nzTreeList.forEach((n,t)=>{if(this.appService.isEnabledModule){let o=this.nodes[t]._key;o&&n.getCheckedNodeList().length&&e.push(o)}this.toolService.recursion(n.getTreeNodes(),n=>{var t;if(n.isChecked||n.isHalfChecked)if(null===(t=n.children)||void 0===t?void 0:t.length){let t=n.origin._key;t&&e.push(t)}else e.push(n.key)})}),e=Array.from(new Set(e));let n=Object.assign(Object.assign({},this.activedRole),{auths:e});this.loading=!0,this.http.post("/role/update",n).subscribe(n=>{this.loading=!1,0==n.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.activedRole.auths=e)})}syncCheckedKeys(){this.checkedKeys=[],Array.from(this.nzTreeList).forEach(e=>{this.checkedKeys.push(...e.getCheckedNodeList().map(e=>e.key))}),this.checkedKeys=[...this.checkedKeys]}toggleChecked(e,n){this.syncCheckedKeys();let t=null==e?Array.from(this.nzTreeList):[e];if(t.some(e=>{var n;return null===(n=e.getCheckedNodeList())||void 0===n?void 0:n.length})){let e=[];t.forEach(n=>{e.push(...n.getCheckedNodeList().map(e=>e.key))}),this.checkedKeys=this.checkedKeys.filter(n=>!e.includes(n))}else t.forEach(e=>{e.getTreeNodes().forEach(e=>{this.checkedKeys.push(e.key)})}),this.checkedKeys=[...this.checkedKeys]}toggleExpand(e,n){let t=null==e?Array.from(this.nzTreeList):[e],o=null==n?this.nodes:this.nodes[n].children||[],i=t.some(e=>this.toolService.tree2Array(e.getTreeNodes()).some(e=>{var n;return(null===(n=e.children)||void 0===n?void 0:n.length)&&e.isExpanded})),r=this.toolService.recursion(o,e=>{e.expanded=!i});null==n?this.nodes=r:this.nodes[n].children=r,this.syncCheckedKeys()}}return e.\u0275fac=function(n){return new(n||e)(A.Y36(q.oN),A.Y36(q.OE),A.Y36(Z.dD),A.Y36(q.zi),A.Y36(A.SBq))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-role"]],viewQuery:function(e,n){if(1&e&&A.Gf(k,5),2&e){let e;A.iGM(e=A.CRH())&&(n.nzTreeList=e)}},decls:20,vars:13,consts:[[3,"nzSpinning"],[1,"row",2,"height","100%"],[1,"flexNone",2,"width","400px","margin-right","16px"],["nzTitle","\u89d2\u8272","nzType","inner",1,"flexCard",3,"nzExtra"],[1,"list-group"],[4,"ngFor","ngForOf"],["extraTemplate",""],[1,"flexNone",2,"min-width","400px"],["nzType","inner",1,"flexCard",3,"nzTitle","nzExtra"],["nzTitle1",""],["extraTemplate1",""],["nzCheckable","",3,"nzData","nzCheckedKeys",4,"ngIf"],["style"," overflow: hidden; ",4,"ngIf"],[3,"nzWidth","nzVisible","nzTitle","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[1,"list-group-item",3,"click"],["nzSize","small"],["nz-button","",3,"click"],["nz-icon","","nzType","form","nzTheme","outline"],["nz-button","","nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzPopconfirmTitle","\u5220\u9664\u89d2\u8272\uff1f",3,"nzOnConfirm","click"],["nz-icon","","nzType","delete","theme","outline"],["nz-button","","nzSize","small","nzType","primary","nzGhost","",3,"click"],["nz-icon","","nzType","plus","theme","outline"],[2,"display","inline-block","vertical-align","middle"],["nz-tooltip","","nzTooltipTitle","\u5168\u9009/\u53cd\u9009",1,"panel_extra_icon",3,"click"],["nz-icon","","nzType","check-square","nzTheme","outline"],["nz-tooltip","","nzTooltipTitle","\u6298\u53e0/\u5c55\u5f00",1,"panel_extra_icon",3,"click"],["nz-icon","","nzType","plus-square","nzTheme","outline"],["nz-icon","","nzType","save","theme","outline"],["nzCheckable","",3,"nzData","nzCheckedKeys"],["tree",""],[2,"overflow","hidden"],[3,"nzHeader","nzActive","nzExtra",4,"ngFor","ngForOf"],[3,"nzHeader","nzActive","nzExtra"],["extraTpl",""],["nz-form",""],[2,"margin-bottom","0"],["nzSpan","6","nzRequired",""],["nzSpan","18"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,n){if(1&e&&(A.TgZ(0,"nz-spin",0),A.TgZ(1,"div",1),A.TgZ(2,"div",2),A.TgZ(3,"nz-card",3),A.TgZ(4,"x-scrollbar"),A.TgZ(5,"ul",4),A.YNc(6,P,9,3,"ng-container",5),A.qZA(),A.qZA(),A.qZA(),A.YNc(7,D,4,0,"ng-template",null,6,A.W1O),A.qZA(),A.TgZ(9,"div",7),A.TgZ(10,"nz-card",8),A.YNc(11,Q,6,1,"ng-template",null,9,A.W1O),A.YNc(13,S,4,0,"ng-template",null,10,A.W1O),A.TgZ(15,"x-scrollbar"),A.YNc(16,K,2,3,"nz-tree",11),A.YNc(17,E,2,1,"nz-collapse",12),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(18,"nz-modal",13),A.NdJ("nzVisibleChange",function(e){return n.roleDialog.display=e})("nzOnCancel",function(){return n.roleDialog.display=!1})("nzOnOk",function(){return n.roleDialogOk()}),A.YNc(19,Y,7,3,"ng-container",14),A.qZA()),2&e){const e=A.MAs(8),t=A.MAs(12),o=A.MAs(14);A.Q6J("nzSpinning",n.loading),A.xp6(3),A.Q6J("nzExtra",e),A.xp6(3),A.Q6J("ngForOf",n.roles),A.xp6(4),A.ekj("isHide",!n.activedRole),A.Q6J("nzTitle",t)("nzExtra",o),A.xp6(6),A.Q6J("ngIf",!n.appService.isEnabledModule),A.xp6(1),A.Q6J("ngIf",n.appService.isEnabledModule),A.xp6(1),A.Q6J("nzWidth",400)("nzVisible",n.roleDialog.display)("nzTitle",n.roleDialog.roleData?"\u7f16\u8f91":"\u6dfb\u52a0")("nzOkLoading",n.roleDialog.loading)}},directives:[z.W,d.bd,C.W,o.sg,o.O5,m.du,m.Hf,s.fY,y.w,s.ix,w.dQ,g.Ls,J.JW,x.SY,v.Hc,O.yH,O.Zv,l._Y,l.JL,l.F,U.Lr,N.SK,U.Nx,N.t3,U.iK,U.Fd,u.Zp,l.Fj,l.JJ,l.On],styles:["[_nghost-%COMP%]    {height:100%;overflow:auto}[_nghost-%COMP%]     .flexCard{max-height:100%;display:flex!important;flex-direction:column}[_nghost-%COMP%]     .flexCard>.ant-card-head{flex:none;border-bottom:1px solid #e8e8e8;margin:0}[_nghost-%COMP%]     .flexCard>.ant-card-body{flex:1;display:flex!important;flex-direction:column;overflow:hidden}[_nghost-%COMP%]     nz-spin{height:100%;display:inline-block;vertical-align:middle}[_nghost-%COMP%]     nz-spin .ant-spin-container{height:100%}[_nghost-%COMP%]     .ant-tree .ant-tree-treenode{padding:0}[_nghost-%COMP%]     .ant-tree-checkbox{margin-right:4px}.list-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.075);padding-left:0;margin-bottom:0}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd;cursor:pointer}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{color:#555;text-decoration:none;background-color:#f5f5f5}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   nz-button-group[_ngcontent-%COMP%]{float:right}.list-group[_ngcontent-%COMP%]   .list-group-item.isActive[_ngcontent-%COMP%]{text-shadow:0 -1px 0 #286090;background-image:linear-gradient(180deg,#337ab7 0,#2b669a);background-repeat:repeat-x;z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7}.list-group[_ngcontent-%COMP%]   .list-group-item.isActive[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#1a7fe7;border-color:#40a9ff}.panel_extra_icon[_ngcontent-%COMP%]{font-size:17px;margin-left:8px;vertical-align:middle}nz-card.isHide[_ngcontent-%COMP%]{display:none!important}"]}),e})();var V=t(3730),$=t(4769);const I=["baseTable"];function R(e,n){if(1&e&&(A.TgZ(0,"span",22),A._uU(1),A.qZA()),2&e){const e=n.$implicit;A.xp6(1),A.Oqu(e.name)}}function W(e,n){1&e&&A.YNc(0,R,2,1,"span",21),2&e&&A.Q6J("ngForOf",n.$implicit.roleList)}function G(e,n){1&e&&(A.TgZ(0,"span",25),A._uU(1,"\u6b63\u5e38"),A.qZA())}function X(e,n){1&e&&(A.TgZ(0,"span",26),A._uU(1,"\u7981\u7528"),A.qZA())}function ee(e,n){if(1&e&&(A.YNc(0,G,2,0,"span",23),A.YNc(1,X,2,0,"span",24)),2&e){const e=n.$implicit;A.Q6J("ngIf",1==e.status),A.xp6(1),A.Q6J("ngIf",0==e.status)}}function ne(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"button",27),A.NdJ("click",function(){const n=A.CHM(e).$implicit;return A.oxw().openEditDialog(n)}),A._UZ(1,"i",28),A.TgZ(2,"span"),A._uU(3,"\u4fee\u6539"),A.qZA(),A.qZA(),A._uU(4," \xa0 "),A.TgZ(5,"button",29),A.NdJ("nzOnConfirm",function(){const n=A.CHM(e).$implicit;return A.oxw().onDelete(n)}),A._UZ(6,"i",30),A.TgZ(7,"span"),A._uU(8,"\u5220\u9664"),A.qZA(),A.qZA()}}function te(e,n){if(1&e&&(A.ynx(0),A.TgZ(1,"form",31),A.TgZ(2,"div",32),A.TgZ(3,"div",33),A.TgZ(4,"nz-form-item"),A.TgZ(5,"nz-form-label",34),A._uU(6,"\u59d3\u540d"),A.qZA(),A.TgZ(7,"nz-form-control"),A._UZ(8,"input",35),A.qZA(),A.qZA(),A.TgZ(9,"nz-form-item"),A.TgZ(10,"nz-form-label",36),A._uU(11,"\u5bc6\u7801"),A.qZA(),A.TgZ(12,"nz-form-control"),A._UZ(13,"input",37),A.qZA(),A.qZA(),A.TgZ(14,"nz-form-item"),A.TgZ(15,"nz-form-label"),A._uU(16,"\u72b6\u6001"),A.qZA(),A.TgZ(17,"nz-form-control"),A.TgZ(18,"nz-radio-group",38),A.TgZ(19,"label",39),A._uU(20,"\u542f\u7528"),A.qZA(),A.TgZ(21,"label",39),A._uU(22,"\u7981\u7528"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(23,"div",33),A.TgZ(24,"nz-form-item"),A.TgZ(25,"nz-form-label",34),A._uU(26,"\u7528\u6237\u540d"),A.qZA(),A.TgZ(27,"nz-form-control"),A._UZ(28,"input",40),A.qZA(),A.qZA(),A.TgZ(29,"nz-form-item"),A.TgZ(30,"nz-form-label",36),A._uU(31,"\u518d\u6b21\u8f93\u5165\u5bc6\u7801"),A.qZA(),A.TgZ(32,"nz-form-control"),A._UZ(33,"input",41),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(34,"nz-card",42),A._UZ(35,"nz-checkbox-group",43),A.qZA(),A.qZA(),A.BQk()),2&e){const e=A.oxw();A.xp6(1),A.Q6J("formGroup",e.editDialog.form),A.xp6(9),A.Q6J("nzRequired",!e.editDialog.rowData),A.xp6(3),A.uIk("placeholder",e.editDialog.rowData&&"\u9009\u586b(\u4e0d\u586b\u5219\u4e0d\u4fee\u6539)"),A.xp6(6),A.Q6J("nzValue",1),A.xp6(2),A.Q6J("nzValue",0),A.xp6(9),A.Q6J("nzRequired",!e.editDialog.rowData),A.xp6(3),A.uIk("placeholder",e.editDialog.rowData&&"\u9009\u586b(\u4e0d\u586b\u5219\u4e0d\u4fee\u6539)")}}let oe=(()=>{class e{constructor(e,n,t,o){this.http=e,this.msg=n,this.fb=t,this.toolService=o,this.searchParams={},this.baseTable=null,this.columns=[{title:"Id",field:"id",fixed:"left"},{title:"\u59d3\u540d",field:"name",fixed:"left"},{title:"\u7528\u6237\u540d",field:"username"},{title:"\u6743\u9650\u89d2\u8272",field:"#roleList"},{title:"\u521b\u5efa\u65f6\u95f4",field:"createTime"},{title:"\u72b6\u6001",field:"#status"},{title:"\u64cd\u4f5c\u9879",field:"#btn",fixed:"right",toggleCheckbox:!1}],this.editDialog={display:!1,loading:!1,rowData:null,form:{}},this.editDialog.form=this.fb.group({id:[null],name:[null,[l.kI.required]],username:[null,[l.kI.required]],status:[null,[l.kI.required]],password:[null],rePassword:[null],roleList:[null]})}ngOnInit(){}openEditDialog(e=null){this.http.get("/role/list",{headers:{loading:"true"}}).subscribe(n=>{if(0==n.code){this.editDialog.display=!0,this.editDialog.rowData=e,this.editDialog.form.reset();let t=(n.data||[]).map(e=>({label:e.name,value:e.id}));e?(delete e.password,delete e.rePassword,t.forEach(n=>n.checked=!!(e.roleList||[]).some(e=>e.id==n.value)),this.editDialog.form.patchValue(Object.assign(Object.assign({},e),{roleList:t}))):this.editDialog.form.patchValue({status:1,roleList:t})}})}editDialogOk(){if(!this.toolService.formValid(this.editDialog.form))return;let e=this.editDialog.form.value;e.roleList=e.roleList.filter(e=>e.checked).map(e=>({id:e.value,name:e.label}));let n="";if(this.editDialog.rowData)n="/user/update",e.password||e.rePassword||(delete e.password,delete e.rePassword);else if(n="/user/add",!e.password||!e.rePassword)return void this.msg.info("\u8bf7\u8f93\u5165\u5bc6\u7801!");!e.password&&!e.rePassword||e.password==e.rePassword?(this.editDialog.loading=!0,this.http.post(n,e).subscribe(e=>{this.editDialog.loading=!1,0==e.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.editDialog.display=!1,this.baseTable.reload())})):this.msg.info("\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4!")}onDelete(e){this.http.post("/user/delete",{id:e.id}).subscribe(e=>{0==e.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.baseTable.reload())})}}return e.\u0275fac=function(n){return new(n||e)(A.Y36(q.OE),A.Y36(Z.dD),A.Y36(l.qu),A.Y36(q.oN))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-user"]],viewQuery:function(e,n){if(1&e&&A.Gf(I,7),2&e){let e;A.iGM(e=A.CRH())&&(n.baseTable=e.first)}},decls:37,vars:15,consts:[["ngNoForm","","nz-form","",2,"margin-bottom","16px",3,"nzLayout"],["nzAddOnBefore","\u59d3\u540d"],["type","text","nz-input","",2,"width","150px",3,"ngModel","ngModelChange"],["nzAddOnBefore","\u7528\u6237\u540d"],["type","button","nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","search"],["type","button","nz-button","","nzType","primary","nz-dropdown","","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis"],["searchMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["type","button","nz-button","","nzType","primary","nzGhost","",3,"click"],["nz-icon","","nzType","plus"],[3,"autoHeight","columns","url","dataPath","totalPath","params"],["baseTable",""],["x-template","roleList"],["x-template","status"],["x-template","btn"],[3,"nzWidth","nzVisible","nzTitle","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["class","ant-tag ant-tag-blue",4,"ngFor","ngForOf"],[1,"ant-tag","ant-tag-blue"],["class","ant-tag ant-tag-green",4,"ngIf"],["class","ant-tag ant-tag-red",4,"ngIf"],[1,"ant-tag","ant-tag-green"],[1,"ant-tag","ant-tag-red"],["nz-button","","nzType","primary","nzGhost","","nzSize","small",3,"click"],["nz-icon","","nzType","form","nzTheme","outline"],["nz-button","","nzDanger","","nzGhost","","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","\u5220\u9664\uff1f",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-form","","nzLayout","vertical","nzSize","small",3,"formGroup"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nzRequired",""],["type","text","nz-input","","formControlName","name"],[3,"nzRequired"],["type","password","nz-input","","formControlName","password"],["formControlName","status",2,"border","1px solid #ddd","width","100%","padding","4px 8px","border-radius","2px"],["nz-radio","",3,"nzValue"],["type","text","nz-input","","formControlName","username"],["type","password","nz-input","","formControlName","rePassword"],["nzTitle","\u8be5\u7528\u6237\u62e5\u6709\u7684\u89d2\u8272","nzSize","small","nzType","inner"],["formControlName","roleList"]],template:function(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"form",0),A.TgZ(1,"nz-form-item"),A.TgZ(2,"nz-form-control"),A.TgZ(3,"nz-input-group",1),A.TgZ(4,"input",2),A.NdJ("ngModelChange",function(e){return n.searchParams.name=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(5,"nz-form-item"),A.TgZ(6,"nz-form-control"),A.TgZ(7,"nz-input-group",3),A.TgZ(8,"input",2),A.NdJ("ngModelChange",function(e){return n.searchParams.username=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(9,"nz-form-item"),A.TgZ(10,"nz-form-control"),A.TgZ(11,"nz-button-group"),A.TgZ(12,"button",4),A.NdJ("click",function(){return A.CHM(e),A.MAs(31).reload(!0)}),A._UZ(13,"i",5),A._uU(14,"\u67e5\u8be2"),A.qZA(),A.TgZ(15,"button",6),A._UZ(16,"i",7),A.qZA(),A.qZA(),A.TgZ(17,"nz-dropdown-menu",null,8),A.TgZ(19,"ul",9),A.TgZ(20,"li",10),A.NdJ("click",function(){A.CHM(e);const t=A.MAs(31);return n.searchParams={},t.reload(!0)}),A._UZ(21,"i",11),A.TgZ(22,"span"),A._uU(23," \u91cd\u7f6e\u641c\u7d22\u9879"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(24,"nz-form-item"),A.TgZ(25,"nz-form-control"),A.TgZ(26,"button",12),A.NdJ("click",function(){return n.openEditDialog()}),A._UZ(27,"i",13),A.TgZ(28,"span"),A._uU(29,"\u6dfb\u52a0"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(30,"x-table",14,15),A.YNc(32,W,1,1,"ng-template",16),A.YNc(33,ee,2,2,"ng-template",17),A.YNc(34,ne,9,0,"ng-template",18),A.qZA(),A.TgZ(35,"nz-modal",19),A.NdJ("nzVisibleChange",function(e){return n.editDialog.display=e})("nzOnCancel",function(){return n.editDialog.display=!1})("nzOnOk",function(){return n.editDialogOk()}),A.YNc(36,te,36,7,"ng-container",20),A.qZA()}if(2&e){const e=A.MAs(18),t=A.MAs(31);A.Q6J("nzLayout","inline"),A.xp6(4),A.Q6J("ngModel",n.searchParams.name),A.xp6(4),A.Q6J("ngModel",n.searchParams.username),A.xp6(4),A.Q6J("nzLoading",t.loading),A.xp6(3),A.Q6J("nzDropdownMenu",e),A.xp6(15),A.Q6J("autoHeight",-16)("columns",n.columns)("url","/user/list")("dataPath","data.data")("totalPath","data.total")("params",n.searchParams),A.xp6(5),A.Q6J("nzWidth",600)("nzVisible",n.editDialog.display)("nzTitle",n.editDialog.rowData?"\u4fee\u6539":"\u6dfb\u52a0")("nzOkLoading",n.editDialog.loading)}},directives:[U.Lr,N.SK,U.Nx,N.t3,U.Fd,y.w,u.gB,u.Zp,l.Fj,l.JJ,l.On,s.fY,s.ix,w.dQ,g.Ls,M.wA,M.cm,M.RR,V.wO,V.r9,$.LC,$.C3,m.du,m.Hf,o.sg,o.O5,J.JW,l._Y,l.JL,l.sg,U.iK,l.u,c.Dg,c.Of,d.bd,p.ub],styles:[""]}),e})(),ie=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-x-form-design"]],decls:1,vars:0,consts:[[2,"border","0"]],template:function(e,n){1&e&&A._UZ(0,"x-form-design",0)},directives:[a.Vx],styles:["[_nghost-%COMP%]{padding:0!important}"]}),e})();var re=t(9084),le=t(1841);function ae(e,n){if(1&e){const e=A.EpF();A.ynx(0),A.TgZ(1,"button",4),A.NdJ("click",function(){return A.CHM(e),A.oxw().onBack("back")}),A._UZ(2,"i",83),A._uU(3," \u8fd4\u56de"),A.qZA(),A.TgZ(4,"button",84),A.NdJ("click",function(){return A.CHM(e),A.oxw().onBack("save")}),A._UZ(5,"i",85),A._uU(6," \u4fdd\u5b58\u5e76\u8fd4\u56de"),A.qZA(),A.BQk()}if(2&e){const e=A.oxw();A.xp6(4),A.Q6J("nzLoading",e.SaveButtonLoading)}}function se(e,n){1&e&&(A._UZ(0,"i",86),A._uU(1," \u9875\u9762\u57fa\u7840\u5c5e\u6027 "))}function ge(e,n){if(1&e&&(A.TgZ(0,"span",100),A.TgZ(1,"span"),A._UZ(2,"i",101),A._uU(3),A.qZA(),A.qZA()),2&e){const e=n.$implicit;A.ekj("ant-tree-node-selected",e.isSelected),A.xp6(2),A.Q6J("nzType",e.isExpanded?"folder-open":"folder"),A.xp6(1),A.hij(" ",e.title," ")}}function de(e,n){if(1&e&&A._UZ(0,"nz-option",102),2&e){const e=n.$implicit;A.Q6J("nzValue",e.id)("nzLabel",e.name)}}const ce=function(){return{"max-height":"400px"}};function ue(e,n){if(1&e){const e=A.EpF();A.ynx(0),A.TgZ(1,"div",87),A.TgZ(2,"nz-input-group",88),A.TgZ(3,"input",89),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().config.name=n})("ngModelChange",function(){return A.CHM(e),A.oxw().errorKeyMap.name=!1}),A.qZA(),A.qZA(),A.TgZ(4,"nz-input-group",90),A.TgZ(5,"nz-tree-select",91),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().menuNodeKey=n})("ngModelChange",function(){return A.CHM(e),A.oxw().errorKeyMap.menuNodeKey=!1}),A.YNc(6,ge,4,4,"ng-template",null,92,A.W1O),A.qZA(),A.qZA(),A.TgZ(8,"nz-input-group",93),A.TgZ(9,"nz-radio-group",94),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().config.status=n}),A.TgZ(10,"label",95),A._uU(11,"\u542f\u7528"),A.qZA(),A.TgZ(12,"label",95),A._uU(13,"\u7981\u7528"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(14,"fieldset",96),A.TgZ(15,"legend"),A._uU(16,"\u9875\u9762\u8bbf\u95ee\u6743\u9650"),A.qZA(),A.TgZ(17,"div",11),A.TgZ(18,"div",97),A._uU(19,"\u9ed8\u8ba4\u5f00\u653e\u7ed9\u6240\u6709\u4eba"),A.qZA(),A.TgZ(20,"label"),A._uU(21,"\u5206\u914d\u7ed9\u7279\u5b9a\u7684\u89d2\u8272(\u7528\u6237\u7ec4):"),A.qZA(),A.TgZ(22,"div"),A.TgZ(23,"nz-select",98),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().roleIdList=n}),A.YNc(24,de,1,2,"nz-option",99),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.BQk()}if(2&e){const e=A.oxw();A.xp6(2),A.ekj("ant-form-item-has-error",e.errorKeyMap.name),A.xp6(1),A.Q6J("ngModel",e.config.name),A.xp6(1),A.ekj("ant-form-item-has-error",e.errorKeyMap.menuNodeKey),A.xp6(1),A.Q6J("nzNodes",e.menus)("ngModel",e.menuNodeKey)("nzExpandedKeys",e.expandKeys)("nzDropdownMatchSelectWidth",!1)("nzDropdownStyle",A.DdM(16,ce)),A.xp6(4),A.Q6J("ngModel",e.config.status),A.xp6(1),A.Q6J("nzValue",1),A.xp6(2),A.Q6J("nzValue",0),A.xp6(11),A.Q6J("ngModel",e.roleIdList)("nzDropdownMatchSelectWidth",!1),A.xp6(1),A.Q6J("ngForOf",e.roleList)}}function pe(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"nz-input-group",103),A.TgZ(1,"input",89),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().config.serviceUrl.baseUrl=n})("ngModelChange",function(){return A.CHM(e),A.oxw().errorKeyMap.baseUrl=!1}),A.qZA(),A.qZA()}if(2&e){const e=A.oxw();A.ekj("ant-form-item-has-error",e.errorKeyMap.baseUrl),A.xp6(1),A.Q6J("ngModel",e.config.serviceUrl.baseUrl)}}function fe(e,n){if(1&e){const e=A.EpF();A.ynx(0),A.TgZ(1,"nz-input-group",104),A.TgZ(2,"input",105),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().config.serviceUrl.testUrl=n})("ngModelChange",function(){return A.CHM(e),A.oxw().errorKeyMap.testUrl=!1}),A.qZA(),A.qZA(),A.TgZ(3,"nz-input-group",106),A.TgZ(4,"input",105),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().config.serviceUrl.betaUrl=n}),A.qZA(),A.qZA(),A.TgZ(5,"nz-input-group",107),A.TgZ(6,"input",105),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().config.serviceUrl.prodUrl=n})("ngModelChange",function(){return A.CHM(e),A.oxw().errorKeyMap.prodUrl=!1}),A.qZA(),A.qZA(),A.BQk()}if(2&e){const e=A.oxw();A.xp6(1),A.ekj("ant-form-item-has-error",e.errorKeyMap.testUrl),A.xp6(1),A.Q6J("ngModel",e.config.serviceUrl.testUrl),A.xp6(2),A.Q6J("ngModel",e.config.serviceUrl.betaUrl),A.xp6(1),A.ekj("ant-form-item-has-error",e.errorKeyMap.prodUrl),A.xp6(1),A.Q6J("ngModel",e.config.serviceUrl.prodUrl)}}function he(e,n){1&e&&(A._UZ(0,"i",108),A.TgZ(1,"span"),A._uU(2," \u6dfb\u52a0"),A.qZA())}function Ze(e,n){1&e&&(A._uU(0," (\u975e\u5fc5\u586b)\u63d0\u4ea4\u524d\u7684\u56de\u8c03, \u7528\u4e8e\u4fee\u6539\u8bf7\u6c42\u65f6\u643a\u5e26\u7684\u6570\u636e"),A._UZ(1,"br"),A._uU(2," \u533f\u540d\u51fd\u6570\u793a\u4f8b: (formValue:\u8868\u5355\u6570\u636e, msg:NzMessageService) => params"),A._UZ(3,"br"),A._uU(4," \u8fd4\u56de false \u7ec8\u6b62\u8bf7\u6c42(\u4e00\u822c\u7528\u4e8e\u81ea\u5b9a\u4e49\u9a8c\u8bc1) "))}function me(e,n){1&e&&(A._UZ(0,"i",109),A.TgZ(1,"span"),A._uU(2," \u8868\u683c"),A.qZA())}function ze(e,n){1&e&&(A.TgZ(0,"span",33),A._UZ(1,"i",34),A._uU(2," \u61d2\u52a0\u8f7d"),A.qZA()),2&e&&A.Q6J("nzPopoverContent","\u9996\u6b21\u70b9\u51fb\u641c\u7d22\u6309\u94ae\u4e4b\u540e\u518d\u52a0\u8f7d\u8868\u683c")}function be(e,n){1&e&&(A._uU(0," * \u5b57\u6bb5\u540d\u793a\u4f8b: sex"),A._UZ(1,"br"),A._uU(2)),2&e&&(A.xp6(2),A.AsE(" * \u533f\u540d\u51fd\u6570(\u8fd4\u56de\u9759\u6001HTML) \u793a\u4f8b: (rowData) => `<span>$","{","rowData.sex == '1' ? '\u7537' \uff1a '\u5973'","}","</span>` "))}function xe(e,n){1&e&&A._uU(0," \u56fa\u5b9a\u6570\u503c \u6216 auto(\u5f39\u6027\u5217) ")}function Te(e,n){1&e&&A._uU(0," \u4ec5\u5728\u8bbe\u7f6e\u4e86\u5217\u5bbd\u6709\u6548(\u56fa\u5b9a\u6570\u503c) ")}function Me(e,n){if(1&e&&A._UZ(0,"nz-option",102),2&e){const e=n.$implicit;A.Q6J("nzValue",e.value)("nzLabel",e.title)}}const Ae=function(){return[]};function _e(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td"),A.TgZ(2,"input",110),A.NdJ("ngModelChange",function(e){return n.$implicit.title=e})("ngModelChange",function(){const n=A.CHM(e).index;return A.oxw().errorKeyMap["table.columns."+n+".title"]=!1}),A.qZA(),A.qZA(),A.TgZ(3,"td"),A.TgZ(4,"textarea",111),A.NdJ("ngModelChange",function(e){return n.$implicit.field=e})("ngModelChange",function(){const n=A.CHM(e).index;return A.oxw().errorKeyMap["table.columns."+n+".field"]=!1}),A.qZA(),A.qZA(),A.TgZ(5,"td"),A.TgZ(6,"nz-input-group",112),A.TgZ(7,"div"),A.TgZ(8,"nz-select",113),A.NdJ("ngModelChange",function(e){return n.$implicit.pipeType=e})("ngModelChange",function(){const n=A.CHM(e).$implicit;return A.oxw().pipeTypeChange(n)}),A.YNc(9,Me,1,2,"nz-option",99),A.qZA(),A.qZA(),A.TgZ(10,"input",114),A.NdJ("ngModelChange",function(e){return n.$implicit.pipeFormat=e}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(11,"td"),A.TgZ(12,"nz-input-group",115),A.TgZ(13,"input",116),A.NdJ("ngModelChange",function(e){return n.$implicit.width=e}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(14,"td"),A.TgZ(15,"nz-select",117),A.NdJ("ngModelChange",function(e){return n.$implicit.ellipsis=e}),A._UZ(16,"nz-option",102),A._UZ(17,"nz-option",102),A.qZA(),A.qZA(),A.TgZ(18,"td"),A.TgZ(19,"nz-select",118),A.NdJ("ngModelChange",function(e){return n.$implicit.align=e}),A._UZ(20,"nz-option",102),A._UZ(21,"nz-option",102),A._UZ(22,"nz-option",102),A.qZA(),A.qZA(),A.TgZ(23,"td",119),A.TgZ(24,"i",120),A.NdJ("click",function(){const n=A.CHM(e).index,t=A.oxw();return t.tableBtnAdd("column",t.config.table.columns,n)}),A.qZA(),A.TgZ(25,"i",121),A.NdJ("click",function(){const n=A.CHM(e).index,t=A.oxw();return(t.config.table.columns||[]).length>1&&t.config.table.columns.splice(n,1)}),A.qZA(),A.TgZ(26,"i",122),A.NdJ("click",function(){const n=A.CHM(e),t=n.last,o=n.index,i=A.oxw();return!t&&i.columnSort(i.config.table.columns,o,"down")}),A.qZA(),A.TgZ(27,"i",123),A.NdJ("click",function(){const n=A.CHM(e),t=n.first,o=n.index,i=A.oxw();return!t&&i.columnSort(i.config.table.columns,o,"up")}),A.qZA(),A.qZA(),A.qZA()}if(2&e){const e=n.$implicit,t=n.index,o=n.first,i=n.last,r=A.oxw();A.xp6(1),A.ekj("ant-form-item-has-error",r.errorKeyMap["table.columns."+t+".title"]),A.xp6(1),A.Q6J("ngModel",e.title),A.xp6(1),A.ekj("ant-form-item-has-error",r.errorKeyMap["table.columns."+t+".field"]),A.xp6(1),A.Q6J("ngModel",e.field),A.xp6(4),A.Q6J("ngModel",e.pipeType),A.xp6(1),A.Q6J("ngForOf",r.pipeList),A.xp6(1),A.Q6J("ngModel",e.pipeFormat)("disabled",!e.pipeType),A.xp6(3),A.Q6J("ngModel",e.width),A.xp6(2),A.Q6J("ngModel",e.ellipsis)("nzDisabled",!e.width),A.xp6(1),A.Q6J("nzValue",!0)("nzLabel","\u7701\u7565(...)\u663e\u793a"),A.xp6(1),A.Q6J("nzValue",!1)("nzLabel","\u6362\u884c"),A.xp6(2),A.Q6J("ngModel",e.align),A.xp6(1),A.Q6J("nzValue","left")("nzLabel","\u5de6\u5bf9\u9f50"),A.xp6(1),A.Q6J("nzValue","center")("nzLabel","\u5c45\u4e2d"),A.xp6(1),A.Q6J("nzValue","right")("nzLabel","\u53f3\u5bf9\u9f50"),A.xp6(3),A.ekj("disabled",1==(r.config.table.columns||A.DdM(30,Ae)).length),A.xp6(1),A.ekj("disabled",i),A.xp6(1),A.ekj("disabled",o)}}function qe(e,n){1&e&&A._uU(0," nz-icon \u7684 nzType \u5c5e\u6027 ")}function Ce(e,n){1&e&&(A._uU(0," (\u975e\u5fc5\u586b)\u662f\u5426\u7981\u7528, \u8ba1\u7b97\u7ed3\u679c\u7b49\u4e8etrue\u5219\u7981\u7528"),A._UZ(1,"br"),A._uU(2," * \u8868\u8fbe\u5f0f\u793a\u4f8b: status == 0"),A._UZ(3,"br"),A._uU(4," * \u533f\u540d\u51fd\u6570\u793a\u4f8b: (rowData) => rowData.status == 0 "))}function ye(e,n){1&e&&(A._uU(0," (\u975e\u5fc5\u586b)\u8868\u5355\u56de\u663e/\u8d4b\u503c\u524d\u7684\u56de\u8c03, \u7528\u4e8e\u4fee\u6539\u8d4b\u503c\u65f6\u7684\u6570\u636e"),A._UZ(1,"br"),A._uU(2," \u533f\u540d\u51fd\u6570\u793a\u4f8b: (rowData) => rowData "))}function we(e,n){1&e&&A._uU(0," \u76f8\u5bf9\u4e8e \u57fa\u7840\u5730\u5740 \u6216 \u5b8c\u6574URL ")}function Je(e,n){1&e&&(A._uU(0," (\u975e\u5fc5\u586b)\u63d0\u4ea4\u524d\u7684\u56de\u8c03, \u7528\u4e8e\u4fee\u6539\u8bf7\u6c42\u65f6\u643a\u5e26\u7684\u6570\u636e"),A._UZ(1,"br"),A._uU(2," \u9ed8\u8ba4: \u884c\u6570\u636e\u548c\u8868\u5355\u6570\u636e\u7ec4\u5408\u5728\u4e00\u8d77(\u540e\u8005\u8986\u76d6\u524d\u8005)"),A._UZ(3,"br"),A._uU(4," \u533f\u540d\u51fd\u6570\u793a\u4f8b: (params:\u7ec4\u5408\u6570\u636e, rowData:\u884c\u6570\u636e, formValue:\u8868\u5355\u6570\u636e, msg:NzMessageService) => params"),A._UZ(5,"br"),A._uU(6," \u8fd4\u56de false \u7ec8\u6b62\u8bf7\u6c42(\u4e00\u822c\u7528\u4e8e\u81ea\u5b9a\u4e49\u9a8c\u8bc1) "))}function ve(e,n){1&e&&(A._uU(0," (\u975e\u5fc5\u586b)\u63a5\u53e3\u6210\u529f\u5224\u5b9a, \u4e0d\u914d\u7f6e\u5219\u4e0d\u5224\u5b9a"),A._UZ(1,"br"),A._uU(2," \u793a\u4f8b: code == 0 "))}function Oe(e,n){1&e&&(A._uU(0," (\u975e\u5fc5\u586b)\u63a5\u53e3\u9519\u8bef\u6d88\u606f, \u4e0d\u914d\u7f6e\u5219\u4e0d\u63d0\u793a"),A._UZ(1,"br"),A._uU(2," * \u54cd\u5e94\u6570\u636e\u5b57\u6bb5\u540d(\u793a\u4f8b: msg\u3001data.msg)"),A._UZ(3,"br"),A._uU(4," * \u56fa\u5b9a\u6587\u672c "))}function Ue(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"nz-button-group",130),A.TgZ(1,"button",131),A.NdJ("click",function(){A.CHM(e);const n=A.oxw(),t=n.index,o=n.$implicit,i=A.oxw();return i.errorKeyMap["table.buttons."+t+".form"]=!1,i.openFormDesign(o)}),A._UZ(2,"i",20),A._uU(3,"\u8bbe\u8ba1\u8868\u5355 "),A.qZA(),A.TgZ(4,"button",132),A._UZ(5,"i",133),A.qZA(),A.TgZ(6,"nz-dropdown-menu",null,134),A.TgZ(8,"ul",135),A.TgZ(9,"li",136),A.NdJ("click",function(){A.CHM(e);const n=A.oxw(),t=n.index,o=n.$implicit,i=A.oxw();return i.errorKeyMap["table.buttons."+t+".form"]=!1,i.cloneFromAdd(o)}),A._uU(10,"\u4ece [\u6dfb\u52a0] \u62f7\u8d1d"),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&e){const e=A.MAs(7),n=A.oxw().index,t=A.oxw();A.xp6(1),A.Q6J("nzDanger",t.errorKeyMap["table.buttons."+n+".form"]),A.xp6(3),A.Q6J("nzDanger",t.errorKeyMap["table.buttons."+n+".form"])("nzDropdownMenu",e)}}function Ne(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"input",137),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().$implicit.popconfirmTitle=n}),A.qZA()}if(2&e){const e=A.oxw().$implicit;A.Q6J("ngModel",e.popconfirmTitle)("nzPopoverContent","(\u975e\u5fc5\u586b)\u53ef\u4ee5\u7559\u7a7a")}}function ke(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td"),A.TgZ(2,"input",110),A.NdJ("ngModelChange",function(e){return n.$implicit.name=e})("ngModelChange",function(){const n=A.CHM(e).index;return A.oxw().errorKeyMap["table.buttons."+n+".name"]=!1}),A.qZA(),A.qZA(),A.TgZ(3,"td"),A.TgZ(4,"nz-select",124),A.NdJ("ngModelChange",function(e){return n.$implicit.type=e}),A._UZ(5,"nz-option",102),A._UZ(6,"nz-option",102),A._UZ(7,"nz-option",102),A.qZA(),A.qZA(),A.TgZ(8,"td"),A.TgZ(9,"input",125),A.NdJ("ngModelChange",function(e){return n.$implicit.icon=e}),A.qZA(),A.qZA(),A.TgZ(10,"td"),A.TgZ(11,"textarea",126),A.NdJ("ngModelChange",function(e){return n.$implicit.disable=e}),A.qZA(),A.qZA(),A.TgZ(12,"td"),A.TgZ(13,"nz-select",124),A.NdJ("ngModelChange",function(e){return n.$implicit.action=e}),A._UZ(14,"nz-option",102),A._UZ(15,"nz-option",102),A.qZA(),A.qZA(),A.TgZ(16,"td"),A.YNc(17,Ue,11,3,"nz-button-group",127),A.YNc(18,Ne,1,2,"input",128),A.qZA(),A.TgZ(19,"td"),A.TgZ(20,"textarea",129),A.NdJ("ngModelChange",function(e){return n.$implicit.fill=e}),A.qZA(),A.qZA(),A.TgZ(21,"td"),A.TgZ(22,"nz-select",124),A.NdJ("ngModelChange",function(e){return n.$implicit.method=e}),A._UZ(23,"nz-option",102),A._UZ(24,"nz-option",102),A._UZ(25,"nz-option",102),A.qZA(),A.qZA(),A.TgZ(26,"td"),A.TgZ(27,"input",110),A.NdJ("ngModelChange",function(e){return n.$implicit.url=e})("ngModelChange",function(){const n=A.CHM(e).index;return A.oxw().errorKeyMap["table.buttons."+n+".url"]=!1}),A.qZA(),A.qZA(),A.TgZ(28,"td"),A.TgZ(29,"textarea",126),A.NdJ("ngModelChange",function(e){return n.$implicit.params=e}),A.qZA(),A.qZA(),A.TgZ(30,"td"),A.TgZ(31,"input",125),A.NdJ("ngModelChange",function(e){return n.$implicit.successCondition=e}),A.qZA(),A.qZA(),A.TgZ(32,"td"),A.TgZ(33,"input",125),A.NdJ("ngModelChange",function(e){return n.$implicit.errorField=e}),A.qZA(),A.qZA(),A.TgZ(34,"td",119),A.TgZ(35,"i",120),A.NdJ("click",function(){const n=A.CHM(e).index,t=A.oxw();return t.tableBtnAdd("button",t.config.table.buttons,n)}),A.qZA(),A.TgZ(36,"i",121),A.NdJ("click",function(){const n=A.CHM(e).index;return A.oxw().config.table.buttons.splice(n,1)}),A.qZA(),A.TgZ(37,"i",122),A.NdJ("click",function(){const n=A.CHM(e),t=n.last,o=n.index,i=A.oxw();return!t&&i.columnSort(i.config.table.buttons,o,"down")}),A.qZA(),A.TgZ(38,"i",123),A.NdJ("click",function(){const n=A.CHM(e),t=n.first,o=n.index,i=A.oxw();return!t&&i.columnSort(i.config.table.buttons,o,"up")}),A.qZA(),A.qZA(),A.qZA()}if(2&e){const e=n.$implicit,t=n.index,o=n.first,i=n.last,r=A.oxw();A.xp6(1),A.ekj("ant-form-item-has-error",r.errorKeyMap["table.buttons."+t+".name"]),A.xp6(1),A.Q6J("ngModel",e.name),A.xp6(2),A.Q6J("ngModel",e.type),A.xp6(1),A.Q6J("nzValue","default")("nzLabel","default"),A.xp6(1),A.Q6J("nzValue","primary")("nzLabel","primary"),A.xp6(1),A.Q6J("nzValue","danger")("nzLabel","danger"),A.xp6(2),A.Q6J("ngModel",e.icon),A.xp6(2),A.Q6J("ngModel",e.disable),A.xp6(2),A.Q6J("ngModel",e.action),A.xp6(1),A.Q6J("nzValue","form")("nzLabel","\u6253\u5f00\u8868\u5355"),A.xp6(1),A.Q6J("nzValue","popconfirm")("nzLabel","\u6c14\u6ce1\u786e\u8ba4\u6846"),A.xp6(2),A.Q6J("ngIf","form"==e.action),A.xp6(1),A.Q6J("ngIf","popconfirm"==e.action),A.xp6(2),A.Q6J("ngModel",e.fill)("disabled","form"!=e.action),A.xp6(2),A.Q6J("ngModel",e.method),A.xp6(1),A.Q6J("nzValue","get")("nzLabel","GET"),A.xp6(1),A.Q6J("nzValue","post_json")("nzLabel","POST(JSON)"),A.xp6(1),A.Q6J("nzValue","post_form")("nzLabel","POST(FORM)"),A.xp6(1),A.ekj("ant-form-item-has-error",r.errorKeyMap["table.buttons."+t+".url"]),A.xp6(1),A.Q6J("ngModel",e.url),A.xp6(2),A.Q6J("ngModel",e.params),A.xp6(2),A.Q6J("ngModel",e.successCondition),A.xp6(2),A.Q6J("ngModel",e.errorField),A.xp6(4),A.ekj("disabled",i),A.xp6(1),A.ekj("disabled",o)}}function Pe(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td",138),A.TgZ(2,"button",139),A.NdJ("click",function(){A.CHM(e);const n=A.oxw();return n.tableBtnAdd("button",n.config.table.buttons)}),A._UZ(3,"i",140),A._uU(4,"\u6dfb\u52a0"),A.qZA(),A.qZA(),A.qZA()}}const De=function(){return{minRows:2,maxRows:25}};function Qe(e,n){if(1&e){const e=A.EpF();A.ynx(0),A.TgZ(1,"textarea",141),A.NdJ("ngModelChange",function(n){return A.CHM(e),A.oxw().jsonEditDialog.value=n}),A.qZA(),A.BQk()}if(2&e){const e=A.oxw();A.xp6(1),A.Q6J("ngModel",e.jsonEditDialog.value)("nzAutosize",A.DdM(2,De))}}function Se(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"x-form-design",142),A.NdJ("close",function(n){return A.CHM(e),A.oxw().formDesignClose(n)}),A.qZA()}if(2&e){const e=A.oxw();A.Q6J("config",e.formDesign.item.form)("baseUrl",e.formDesign.baseUrl)("SaveButtonLoading",e.formDesign.loading)("showSaveButton",!0)}}const Le=function(){return{minRows:2}};let Ke=(()=>{class e{constructor(e,n,t,o){this.http=e,this.appService=n,this.toolService=t,this.msg=o,this.classNames="column",this.config={},this.showSaveButton=!1,this.SaveButtonLoading=!1,this.close=new A.vpe,this.menus=[],this.menuNodeKey=null,this.expandKeys=[],this.roleList=[],this.roleIdList=[],this.fixedColumnConfig=0,this.pipeList=[{title:"\u6570\u503c",value:"number",defaultFormat:"'1.0-0'"},{title:"\u8d27\u5e01",value:"currency",defaultFormat:"'CNY':'\uffe5':'1.2-2'"},{title:"\u767e\u5206\u6bd4",value:"percent",defaultFormat:"'1.0-2'"},{title:"\u65e5\u671f",value:"date",defaultFormat:"'yyyy-MM-dd\xa0HH:mm:ss'"},{title:"\u5207\u5272",value:"slice",defaultFormat:"'0:1'"},{title:"JSON",value:"json",defaultFormat:""}],this.jsonEditDialog={display:!1,value:""},this.formDesign={display:!1,item:{form:{}},baseUrl:"",loading:!1},this.errorKeyMap={},this.initConfig()}ngOnChanges(e){e.config&&this.initConfig()}ngOnInit(){this.getMenus(),this.getRoles()}getMenus(){let e=JSON.parse(JSON.stringify(this.appService.modulesAll));this.menus=this.toolService.recursion(e,e=>{var n;return e.title=e.name,!(!e.key||!(null===(n=e.children)||void 0===n?void 0:n.length))})}getRoles(){this.SaveButtonLoading=!0,this.http.get("/role/list").toPromise().then(e=>{this.SaveButtonLoading=!1,0==e.code&&(this.roleList=(e.data||[]).map(e=>({name:e.name,id:e.id})))})}initConfig(){this.errorKeyMap={},this.config=JSON.parse(JSON.stringify(Object.assign(Object.assign({},re.u),this.config))),Object.entries(this.config).forEach(([e,n])=>{null!=n&&"Object"==n.constructor.name&&(this.config[e]=Object.assign(Object.assign({},re.u[e]),n))}),(this.config.menuPathList||[]).length&&(this.menuNodeKey=this.config.menuPathList[this.config.menuPathList.length-1].key,this.expandKeys=this.config.menuPathList.map(e=>e.key)),this.roleIdList=(this.config.roleList||[]).map(e=>e.id)}valid(){this.errorKeyMap={};let e=!0;this.showSaveButton&&(this.config.name||(this.errorKeyMap.name=!0,e=!1),this.menuNodeKey||(this.errorKeyMap.menuNodeKey=!0,e=!1)),"single"==this.config.serviceUrl.type?this.config.serviceUrl.baseUrl||(this.errorKeyMap.baseUrl=!0,e=!1):(this.config.serviceUrl.testUrl||(this.errorKeyMap.testUrl=!0,e=!1),this.config.serviceUrl.prodUrl||(this.errorKeyMap.prodUrl=!0,e=!1)),e||this.msg.error("\u8bf7\u5b8c\u5584 [\u9875\u9762\u57fa\u7840\u5c5e\u6027]");let n=!0;this.config.create.enabled&&((this.config.create.form.children||[]).length||(this.errorKeyMap["create.form"]=!0,n=!1),this.config.create.url||(this.errorKeyMap["create.url"]=!0,n=!1)),n||this.msg.error("\u8bf7\u5b8c\u5584 [\u6dfb\u52a0]"),this.config.table.search.enabled&&!(this.config.table.search.form.children||[]).length&&(this.errorKeyMap["table.search.form"]=!0,this.msg.error("\u8bf7\u8bbe\u8ba1 [\u8868\u683c / \u641c\u7d22\u8868\u5355]"));let t=!0;this.config.table.paging.showPagination&&this.config.table.paging.serverPagination&&(this.config.table.paging.pageIndexField||(this.errorKeyMap["table.paging.pageIndexField"]=!0,t=!1),this.config.table.paging.pageSizeField||(this.errorKeyMap["table.paging.pageSizeField"]=!0,t=!1)),t||this.msg.error("\u8bf7\u5b8c\u5584 [\u8868\u683c / \u5206\u9875\u914d\u7f6e]");let o=!0;this.config.table.request.url||(this.errorKeyMap["table.request.url"]=!0,o=!1),this.config.table.request.dataPath||(this.errorKeyMap["table.request.dataPath"]=!0,o=!1),this.config.table.paging.showPagination&&this.config.table.paging.serverPagination&&(this.config.table.request.totalPath||(this.errorKeyMap["table.request.totalPath"]=!0,o=!1)),o||this.msg.error("\u8bf7\u5b8c\u5584 [\u8868\u683c / \u8bf7\u6c42\u914d\u7f6e]");let i=!0;this.config.table.columns.forEach((e,n)=>{e.title||(this.errorKeyMap[`table.columns.${n}.title`]=!0,i=!1),e.field||(this.errorKeyMap[`table.columns.${n}.field`]=!0,i=!1)}),i||this.msg.error("\u8bf7\u5b8c\u5584 [\u8868\u683c / \u5217\u914d\u7f6e]");let r=!0;return this.config.table.buttons.forEach((e,n)=>{e.name||(this.errorKeyMap[`table.buttons.${n}.name`]=!0,r=!1),"form"==e.action&&0==(e.form.children||[]).length&&(this.errorKeyMap[`table.buttons.${n}.form`]=!0,r=!1),e.url||(this.errorKeyMap[`table.buttons.${n}.url`]=!0,r=!1)}),r||this.msg.error("\u8bf7\u5b8c\u5584 [\u8868\u683c / \u884c\u64cd\u4f5c\u9879\u914d\u7f6e]"),!Object.values(this.errorKeyMap).some(e=>e)}getConfig(e=!0){if(e&&!this.valid())return null;if(this.menuNodeKey){let e=this.toolService.tree2Array(this.menus).find(e=>e.key==this.menuNodeKey);this.config.menuPathList=[...this.toolService.getParentNodeList(this.menus,e),e],this.config.menuPathList=this.config.menuPathList.map(e=>({name:e.name,key:e.key}))}return this.config.roleList=this.roleList.filter(e=>this.roleIdList.includes(e.id)),this.config.table.columns.forEach((e,n)=>n<=this.fixedColumnConfig&&(e.fixed="left")),this.config}openFormDesign(e){if("single"==this.config.serviceUrl.type){if(!this.config.serviceUrl.baseUrl)return void this.msg.error("\u8bf7\u8bbe\u7f6e [\u670d\u52a1\u5668\u73af\u5883 / \u57fa\u7840\u5730\u5740]");this.formDesign.baseUrl=this.config.serviceUrl.baseUrl}else{if(!this.config.serviceUrl.testUrl)return void this.msg.error("\u8bf7\u8bbe\u7f6e [\u670d\u52a1\u5668\u73af\u5883 / \u6d4b\u8bd5\u5730\u5740]");this.formDesign.baseUrl=this.config.serviceUrl.testUrl}this.formDesign.item=e,this.formDesign.display=!0}formDesignClose({type:e,config:n}){"save"==e&&(this.formDesign.item.form=n),this.formDesign.display=!1}onBack(e){let n=null;if("save"==e&&(n=this.getConfig(),!n))return null;this.close.emit({type:e,config:n})}preview(){var e;let n=this.getConfig();if(!n)return null;window.sessionStorage.setItem("x-page-config",JSON.stringify(n));let t=window.location.origin,o=null===(e=document.querySelector("base"))||void 0===e?void 0:e.getAttribute("href"),i=this.toolService.concatUrl(t,o,"/x-page-preview/0");window.open(i)}openJsonEditDialog(){this.jsonEditDialog.value=JSON.stringify(this.getConfig(!1),null,4),this.jsonEditDialog.display=!0}jsonEditDialogOk(){try{let e=JSON.parse(this.jsonEditDialog.value);this.config=e,this.initConfig(),this.jsonEditDialog.display=!1}catch(e){this.msg.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684JSON")}}cloneFromAdd(e){Object.assign(e,JSON.parse(JSON.stringify(this.config.create))),delete e.enabled,this.msg.success("\u64cd\u4f5c\u6210\u529f")}pipeTypeChange(e){var n;e.pipeFormat=e.pipeType?null===(n=this.pipeList.find(n=>n.value==e.pipeType))||void 0===n?void 0:n.defaultFormat:""}tableBtnAdd(e,n,t=-1){n.splice(t+1,0,"column"==e?{title:"",field:""}:{type:"primary",action:"form",form:{},method:"post_json",successCondition:"code == 0",errorField:""})}columnSort(e,n,t){if("up"==t){let t=e[n-1];e[n-1]=e[n],e[n]=t}else{let t=e[n];e[n]=e[n+1],e[n+1]=t}}}return e.\u0275fac=function(n){return new(n||e)(A.Y36(le.eN),A.Y36(q.zi),A.Y36(q.oN),A.Y36(Z.dD))},e.\u0275cmp=A.Xpm({type:e,selectors:[["x-page-design"]],hostVars:2,hostBindings:function(e,n){2&e&&A.Tol(n.classNames)},inputs:{config:"config",showSaveButton:"showSaveButton",SaveButtonLoading:"SaveButtonLoading"},outputs:{close:"close"},features:[A.TTD],decls:224,vars:82,consts:[[1,"toolbar","flexNone",2,"height","48px"],[4,"ngIf"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","code","nzTheme","outline"],[1,"container_edit"],[3,"nzSpinning"],["nzSize","small",1,"card-blue",3,"nzTitle"],["base_config_title",""],[1,"fieldset_sm","serviceUrl"],[2,"width","700px"],[1,"label_width90",2,"margin-bottom","8px",3,"ngModel","nzButtonStyle","ngModelChange"],["nz-radio-button","","nzValue","single"],["nz-radio-button","","nzValue","multiple"],["nzAddOnBefore","\u57fa\u7840\u5730\u5740(baseUrl)","nzAddOnAfter","/","class","nz_input_group_required label_width90",3,"ant-form-item-has-error",4,"ngIf"],["add_card_title",""],["nzSize","small",1,"card-high","card-geekblue",3,"nzTitle"],["nz-checkbox","",3,"ngModel","ngModelChange"],["nz-button","","nzType","link","nzSize","small",3,"disabled","nzDanger","click"],["nz-icon","","nzType","form","nzTheme","outline"],[1,"fieldset_sm","edit_config",2,"margin-top","16px"],[2,"margin-bottom","8px",3,"ngModel","nzButtonStyle","ngModelChange"],["nz-radio-button","","nzValue","get"],["nz-radio-button","","nzValue","post_json"],["nz-radio-button","","nzValue","post_form"],["nzAddOnBefore","\u63a5\u53e3","nzAddOnAfter","/",1,"nz_input_group_required","label_width87"],["type","text","nz-input","","placeholder","\u76f8\u5bf9\u4e8e \u57fa\u7840\u5730\u5740 \u6216 \u5b8c\u6574URL",3,"ngModel","ngModelChange"],["nzAddOnBefore","\u6210\u529f\u5224\u5b9a",1,"label_width87"],["type","text","nz-input","","placeholder","(\u975e\u5fc5\u586b) \u4e0d\u914d\u7f6e\u5219\u4e0d\u5224\u5b9a(\u793a\u4f8b: code == 0)",3,"ngModel","ngModelChange"],["nzAddOnBefore","\u9519\u8bef\u6d88\u606f",1,"label_width87"],["type","text","nz-input","","placeholder","(\u975e\u5fc5\u586b) \u9519\u8bef\u6d88\u606f\u5b57\u6bb5\u540d(\u793a\u4f8b: msg\u3001data.msg) \u6216 \u56fa\u5b9a\u6587\u672c",3,"ngModel","ngModelChange"],[1,"fieldset_sm"],["nz-popover","",3,"nzPopoverContent"],["nz-icon","","nzType","info-circle","nzTheme","outline"],["create_params",""],["nz-input","","nzSize","small","placeholder","(\u975e\u5fc5\u586b) \u793a\u4f8b: (formValue) => { return formValue; }",3,"ngModel","nzAutosize","ngModelChange"],["table_card_title",""],["nzSize","small",1,"card-high","card-purple",3,"nzTitle"],[2,"margin-bottom","16px"],["nzAddOnBefore","ant-design \u98ce\u683c"],[1,"input-group-control"],[3,"ngModel","ngModelChange"],[1,"fieldset_sm","table_paging_config"],["nzAddOnBefore","\u542f\u7528\u5206\u9875",1,"label_width145"],["nzAddOnBefore","\u670d\u52a1\u5668\u7aef\u5206\u9875",1,"label_width145"],[3,"ngModel","nzDisabled","ngModelChange"],["nzAddOnBefore","\u8bf7\u6c42\u9875\u7801\u5b57\u6bb5",1,"nz_input_group_required","label_width145"],["type","text","nz-input","",3,"ngModel","disabled","ngModelChange"],["nzAddOnBefore","\u8bf7\u6c42\u5206\u9875\u5927\u5c0f\u5b57\u6bb5",1,"nz_input_group_required","label_width145"],[1,"fieldset_sm","table_request_config"],["nzAddOnBefore","\u63a5\u53e3","nzAddOnAfter","/",1,"nz_input_group_required","label_width115"],["nzAddOnBefore","\u6210\u529f\u5224\u5b9a",1,"label_width115"],["nzAddOnBefore","\u9519\u8bef\u6d88\u606f",1,"label_width115"],["nzAddOnBefore","\u884c\u5217\u8868\u5b57\u6bb5",1,"nz_input_group_required","label_width115"],["type","text","nz-input","","placeholder","\u793a\u4f8b: data.data",3,"ngModel","ngModelChange"],["nzAddOnBefore","\u603b\u8bb0\u5f55\u6570\u5b57\u6bb5",1,"nz_input_group_required","label_width115"],["type","text","nz-input","","placeholder","\u793a\u4f8b: data.total",3,"ngModel","disabled","ngModelChange"],[1,"label_width115",3,"nzAddOnBefore"],["lazy_title",""],["nz-input","","nzSize","small","placeholder","(\u975e\u5fc5\u586b) \u793a\u4f8b: (params) => params",3,"ngModel","nzAutosize","ngModelChange"],["nz-input","","nzSize","small","placeholder","(\u975e\u5fc5\u586b) \u793a\u4f8b: (res) => res",3,"ngModel","nzAutosize","ngModelChange"],[1,"config-table"],[1,"xrequired"],["nz-popover","",1,"xrequired",3,"nzPopoverContent"],["table_col_field",""],[2,"min-width","250px"],["table_col_width",""],["table_col_ellipsis",""],[4,"ngFor","ngForOf"],[2,"margin-top","8px",3,"ngModel","nzButtonStyle","ngModelChange"],["nz-radio-button","",3,"nzValue"],["table_btn_icon",""],["table_btn_disabled",""],["colspan","2",1,"xrequired"],["table_btn_fill",""],["table_btn_url",""],["table_btn_params",""],["table_btn_successCondition",""],["table_btn_errorField",""],["nzTitle","\u7f16\u8f91\u914d\u7f6e",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"config","baseUrl","SaveButtonLoading","showSaveButton","close",4,"ngIf"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","save","nzTheme","outline"],["nz-icon","","nzType","setting","nzTheme","outline"],[2,"width","300px"],["nzAddOnBefore","\u9875\u9762\u540d\u79f0",1,"nz_input_group_required","label_width87"],["type","text","nz-input","",3,"ngModel","ngModelChange"],["nzAddOnBefore","\u83dc\u5355\u4f4d\u7f6e",1,"nz_input_group_required","label_width87"],[2,"width","100%",3,"nzNodes","ngModel","nzExpandedKeys","nzDropdownMatchSelectWidth","nzDropdownStyle","ngModelChange"],["nzTreeTemplate",""],["nzAddOnBefore","\u751f\u6548\u72b6\u6001",1,"nz_input_group_required","label_width87",2,"margin-bottom","8px"],[1,"input-group-control",3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue"],[1,"fieldset_sm",2,"margin-top","8px"],[1,"intro",2,"margin-bottom","8px"],["nzMode","multiple",2,"width","100%",3,"ngModel","nzDropdownMatchSelectWidth","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"ant-tree-node-content-wrapper"],["nz-icon","",3,"nzType"],[3,"nzValue","nzLabel"],["nzAddOnBefore","\u57fa\u7840\u5730\u5740(baseUrl)","nzAddOnAfter","/",1,"nz_input_group_required","label_width90"],["nzAddOnBefore","\u6d4b\u8bd5","nzAddOnAfter","/",1,"nz_input_group_required","label_width90"],["type","text","nz-input","","placeholder","\u57fa\u7840\u5730\u5740(baseUrl)",3,"ngModel","ngModelChange"],["nzAddOnBefore","BETA","nzAddOnAfter","/",1,"label_width90"],["nzAddOnBefore","\u6b63\u5f0f","nzAddOnAfter","/",1,"nz_input_group_required","label_width90"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-icon","","nzType","table","nzTheme","outline"],["type","text","nzSize","small","nz-input","","placeholder","\u5fc5\u586b",3,"ngModel","ngModelChange"],["nz-input","","placeholder","\u5fc5\u586b",3,"ngModel","ngModelChange"],["nzCompact","","nzSize","small",2,"display","flex"],["nzAllowClear","","nzPlaceHolder","","nzSize","small",2,"flex","none","width","80px",3,"ngModel","ngModelChange"],["type","text","nzSize","small","nz-input","","placeholder","",3,"ngModel","disabled","ngModelChange"],["nzAddOnAfter","PX","nzSize","small"],["type","text","nz-input","","placeholder","",3,"ngModel","ngModelChange"],["nzPlaceHolder","","nzSize","small",2,"width","100%","font-size","12px",3,"ngModel","nzDisabled","ngModelChange"],["nzPlaceHolder","","nzSize","small",2,"width","100%",3,"ngModel","ngModelChange"],[2,"background","#f3f3f3","text-align","center"],["nz-icon","","nzType","plus-circle","nzTheme","outline",1,"table_btn",3,"click"],["nz-icon","","nzType","minus-circle","nzTheme","outline",1,"table_btn",3,"click"],["nz-icon","","nzType","arrow-down","nzTheme","outline",1,"table_btn",3,"click"],["nz-icon","","nzType","arrow-up","nzTheme","outline",1,"table_btn",3,"click"],["nzSize","small",3,"ngModel","ngModelChange"],["type","text","nzSize","small","nz-input","",3,"ngModel","ngModelChange"],["nz-input","",3,"ngModel","ngModelChange"],["nzSize","small","style","width: 100%; display: flex;",4,"ngIf"],["type","text","nzSize","small","nz-input","","nz-popover","","placeholder","\u6c14\u6ce1\u6846\u6587\u6848",3,"ngModel","nzPopoverContent","ngModelChange",4,"ngIf"],["nz-input","",3,"ngModel","disabled","ngModelChange"],["nzSize","small",2,"width","100%","display","flex"],["nz-button","","nzType","primary","nzGhost","","nzSize","small",2,"flex","1",3,"nzDanger","click"],["nz-button","","nzType","primary","nzGhost","","nz-dropdown","","nzPlacement","bottomRight",2,"flex","none","border-left-color","unset","width","20px",3,"nzDanger","nzDropdownMenu"],["nz-icon","","nzType","down","nzTheme","outline"],["table_btn_form_copy","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["type","text","nzSize","small","nz-input","","nz-popover","","placeholder","\u6c14\u6ce1\u6846\u6587\u6848",3,"ngModel","nzPopoverContent","ngModelChange"],["colspan","13"],["nz-button","","nzType","dashed","nzSize","small","nzBlock","",3,"click"],["nz-icon","","nzType","plus-circle","nzTheme","outline"],["nz-input","",3,"ngModel","nzAutosize","ngModelChange"],[3,"config","baseUrl","SaveButtonLoading","showSaveButton","close"]],template:function(e,n){if(1&e&&(A.TgZ(0,"div",0),A.YNc(1,ae,7,1,"ng-container",1),A.TgZ(2,"button",2),A.NdJ("click",function(){return n.preview()}),A._UZ(3,"i",3),A._uU(4," \u9884\u89c8"),A.qZA(),A.TgZ(5,"button",4),A.NdJ("click",function(){return n.openJsonEditDialog()}),A._UZ(6,"i",5),A._uU(7," \u7f16\u8f91\u914d\u7f6e(JSON)"),A.qZA(),A.qZA(),A.TgZ(8,"div",6),A.TgZ(9,"nz-spin",7),A.TgZ(10,"nz-card",8),A.YNc(11,se,2,0,"ng-template",null,9,A.W1O),A.YNc(13,ue,25,17,"ng-container",1),A.TgZ(14,"fieldset",10),A.TgZ(15,"legend"),A._uU(16,"\u670d\u52a1\u5668\u73af\u5883"),A.qZA(),A.TgZ(17,"div",11),A.TgZ(18,"nz-radio-group",12),A.NdJ("ngModelChange",function(e){return n.config.serviceUrl.type=e})("ngModelChange",function(){return n.errorKeyMap.baseUrl=n.errorKeyMap.testUrl=n.errorKeyMap.prodUrl=!1}),A.TgZ(19,"label",13),A._uU(20,"\u5355\u4e00\u73af\u5883"),A.qZA(),A.TgZ(21,"label",14),A._uU(22,"\u591a\u73af\u5883"),A.qZA(),A.qZA(),A.YNc(23,pe,2,3,"nz-input-group",15),A.YNc(24,fe,7,7,"ng-container",1),A.qZA(),A.qZA(),A.qZA(),A.YNc(25,he,3,0,"ng-template",null,16,A.W1O),A.TgZ(27,"nz-card",17),A.TgZ(28,"label",18),A.NdJ("ngModelChange",function(e){return n.config.create.enabled=e}),A._uU(29,"\u542f\u7528"),A.qZA(),A.TgZ(30,"button",19),A.NdJ("click",function(){return n.openFormDesign(n.config.create)})("click",function(){return n.errorKeyMap["create.form"]=!1}),A._UZ(31,"i",20),A._uU(32," \u8bbe\u8ba1\u8868\u5355 "),A.qZA(),A.TgZ(33,"fieldset",21),A.TgZ(34,"legend"),A._uU(35,"\u8bf7\u6c42\u914d\u7f6e"),A.qZA(),A.TgZ(36,"div",11),A.TgZ(37,"nz-radio-group",22),A.NdJ("ngModelChange",function(e){return n.config.create.method=e}),A.TgZ(38,"label",23),A._uU(39,"GET"),A.qZA(),A.TgZ(40,"label",24),A._uU(41,"POST(JSON)"),A.qZA(),A.TgZ(42,"label",25),A._uU(43,"POST(FORM)"),A.qZA(),A.qZA(),A.TgZ(44,"nz-input-group",26),A.TgZ(45,"input",27),A.NdJ("ngModelChange",function(e){return n.config.create.url=e})("ngModelChange",function(){return n.errorKeyMap["create.url"]=!1}),A.qZA(),A.qZA(),A.TgZ(46,"nz-input-group",28),A.TgZ(47,"input",29),A.NdJ("ngModelChange",function(e){return n.config.create.successCondition=e}),A.qZA(),A.qZA(),A.TgZ(48,"nz-input-group",30),A.TgZ(49,"input",31),A.NdJ("ngModelChange",function(e){return n.config.create.errorField=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(50,"fieldset",32),A.TgZ(51,"legend",33),A._UZ(52,"i",34),A._uU(53," \u63d0\u4ea4\u524d\u56de\u8c03 \u63d0\u4ea4\u524d\u7684\u56de\u8c03(\u4fee\u6539\u8bf7\u6c42\u53c2\u6570) "),A.YNc(54,Ze,5,0,"ng-template",null,35,A.W1O),A.qZA(),A.TgZ(56,"div",11),A.TgZ(57,"textarea",36),A.NdJ("ngModelChange",function(e){return n.config.create.params=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.YNc(58,me,3,0,"ng-template",null,37,A.W1O),A.TgZ(60,"nz-card",38),A.TgZ(61,"div",39),A.TgZ(62,"label",18),A.NdJ("ngModelChange",function(e){return n.config.table.search.enabled=e}),A._uU(63,"\u542f\u7528\u641c\u7d22"),A.qZA(),A.TgZ(64,"button",19),A.NdJ("click",function(){return n.openFormDesign(n.config.table.search)})("click",function(){return n.errorKeyMap["table.search.form"]=!1}),A._UZ(65,"i",20),A._uU(66," \u8bbe\u8ba1\u641c\u7d22\u8868\u5355 "),A.qZA(),A.qZA(),A.TgZ(67,"fieldset",32),A.TgZ(68,"legend"),A._uU(69,"\u6837\u5f0f\u914d\u7f6e"),A.qZA(),A.TgZ(70,"div",11),A.TgZ(71,"nz-input-group",40),A.TgZ(72,"div",41),A.TgZ(73,"nz-switch",42),A.NdJ("ngModelChange",function(e){return n.config.table.style.antDesignStyle=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(74,"fieldset",43),A.TgZ(75,"legend"),A._uU(76,"\u5206\u9875\u914d\u7f6e"),A.qZA(),A.TgZ(77,"div",11),A.TgZ(78,"nz-input-group",44),A.TgZ(79,"div",41),A.TgZ(80,"nz-switch",42),A.NdJ("ngModelChange",function(e){return n.config.table.paging.showPagination=e}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(81,"nz-input-group",45),A.TgZ(82,"div",41),A.TgZ(83,"nz-switch",46),A.NdJ("ngModelChange",function(e){return n.config.table.paging.serverPagination=e}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(84,"nz-input-group",47),A.TgZ(85,"input",48),A.NdJ("ngModelChange",function(e){return n.config.table.paging.pageIndexField=e})("ngModelChange",function(){return n.errorKeyMap["table.paging.pageIndexField"]=!1}),A.qZA(),A.qZA(),A.TgZ(86,"nz-input-group",49),A.TgZ(87,"input",48),A.NdJ("ngModelChange",function(e){return n.config.table.paging.pageSizeField=e})("ngModelChange",function(){return n.errorKeyMap["table.paging.pageSizeField"]=!1}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(88,"fieldset",50),A.TgZ(89,"legend"),A._uU(90,"\u8bf7\u6c42\u914d\u7f6e"),A.qZA(),A.TgZ(91,"div",11),A.TgZ(92,"nz-radio-group",22),A.NdJ("ngModelChange",function(e){return n.config.table.request.method=e}),A.TgZ(93,"label",23),A._uU(94,"GET"),A.qZA(),A.TgZ(95,"label",24),A._uU(96,"POST(JSON)"),A.qZA(),A.TgZ(97,"label",25),A._uU(98,"POST(FORM)"),A.qZA(),A.qZA(),A.TgZ(99,"nz-input-group",51),A.TgZ(100,"input",27),A.NdJ("ngModelChange",function(e){return n.config.table.request.url=e})("ngModelChange",function(){return n.errorKeyMap["table.request.url"]=!1}),A.qZA(),A.qZA(),A.TgZ(101,"nz-input-group",52),A.TgZ(102,"input",29),A.NdJ("ngModelChange",function(e){return n.config.table.request.successCondition=e}),A.qZA(),A.qZA(),A.TgZ(103,"nz-input-group",53),A.TgZ(104,"input",31),A.NdJ("ngModelChange",function(e){return n.config.table.request.errorField=e}),A.qZA(),A.qZA(),A.TgZ(105,"nz-input-group",54),A.TgZ(106,"input",55),A.NdJ("ngModelChange",function(e){return n.config.table.request.dataPath=e})("ngModelChange",function(){return n.errorKeyMap["table.request.dataPath"]=!1}),A.qZA(),A.qZA(),A.TgZ(107,"nz-input-group",56),A.TgZ(108,"input",57),A.NdJ("ngModelChange",function(e){return n.config.table.request.totalPath=e})("ngModelChange",function(){return n.errorKeyMap["table.request.totalPath"]=!1}),A.qZA(),A.qZA(),A.TgZ(109,"nz-input-group",58),A.TgZ(110,"div",41),A.TgZ(111,"nz-switch",42),A.NdJ("ngModelChange",function(e){return n.config.table.request.lazy=e}),A.qZA(),A.qZA(),A.YNc(112,ze,3,1,"ng-template",null,59,A.W1O),A.qZA(),A.qZA(),A.qZA(),A.TgZ(114,"fieldset",32),A.TgZ(115,"legend"),A._uU(116,"\u8bf7\u6c42\u524d\u7684\u56de\u8c03(\u4fee\u6539\u8bf7\u6c42\u53c2\u6570)"),A.qZA(),A.TgZ(117,"div",11),A.TgZ(118,"textarea",60),A.NdJ("ngModelChange",function(e){return n.config.table.request.params=e}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(119,"fieldset",32),A.TgZ(120,"legend"),A._uU(121,"\u8bf7\u6c42\u6210\u529f\u7684\u56de\u8c03(\u4fee\u6539\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e)"),A.qZA(),A.TgZ(122,"div",11),A.TgZ(123,"textarea",61),A.NdJ("ngModelChange",function(e){return n.config.table.request.success=e}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(124,"fieldset",32),A.TgZ(125,"legend"),A._uU(126,"\u5217\u914d\u7f6e"),A.qZA(),A.TgZ(127,"div"),A.TgZ(128,"div",62),A.TgZ(129,"table"),A.TgZ(130,"thead"),A.TgZ(131,"tr"),A.TgZ(132,"th",63),A._uU(133,"\u5217\u540d"),A.qZA(),A.TgZ(134,"th",64),A._UZ(135,"i",34),A._uU(136," \u6570\u636e\u5b57\u6bb5\u540d "),A.YNc(137,be,3,2,"ng-template",null,65,A.W1O),A.qZA(),A.TgZ(139,"th",66),A._uU(140,"\u683c\u5f0f\u5316\u7ba1\u9053"),A.qZA(),A.TgZ(141,"th",33),A._UZ(142,"i",34),A._uU(143," \u5217\u5bbd "),A.YNc(144,xe,1,0,"ng-template",null,67,A.W1O),A.qZA(),A.TgZ(146,"th",33),A._UZ(147,"i",34),A._uU(148," \u6ea2\u51fa\u7701\u7565(...) "),A.YNc(149,Te,1,0,"ng-template",null,68,A.W1O),A.qZA(),A.TgZ(151,"th"),A._uU(152,"\u5bf9\u9f50\u65b9\u5f0f"),A.qZA(),A.TgZ(153,"th"),A._uU(154,"\u64cd\u4f5c"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(155,"tbody"),A.YNc(156,_e,28,31,"tr",69),A.qZA(),A.qZA(),A.qZA(),A.TgZ(157,"div"),A.TgZ(158,"nz-radio-group",70),A.NdJ("ngModelChange",function(e){return n.fixedColumnConfig=e}),A.TgZ(159,"label",71),A._uU(160,"\u56fa\u5b9a\u7b2c\u4e00\u5217"),A.qZA(),A.TgZ(161,"label",71),A._uU(162,"\u56fa\u5b9a\u524d\u4e24\u5217"),A.qZA(),A.TgZ(163,"label",71),A._uU(164,"\u56fa\u5b9a\u524d\u4e09\u5217"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(165,"fieldset",32),A.TgZ(166,"legend"),A._uU(167,"\u884c\u64cd\u4f5c\u9879\u914d\u7f6e"),A.qZA(),A.TgZ(168,"div"),A.TgZ(169,"div",62),A.TgZ(170,"table"),A.TgZ(171,"thead"),A.TgZ(172,"tr"),A.TgZ(173,"th",63),A._uU(174,"\u540d\u79f0"),A.qZA(),A.TgZ(175,"th"),A._uU(176,"\u6309\u94ae\u7c7b\u578b"),A.qZA(),A.TgZ(177,"th",33),A._UZ(178,"i",34),A._uU(179," \u56fe\u6807 "),A.YNc(180,qe,1,0,"ng-template",null,72,A.W1O),A.qZA(),A.TgZ(182,"th",33),A._UZ(183,"i",34),A._uU(184," \u662f\u5426\u7981\u7528 "),A.YNc(185,Ce,5,0,"ng-template",null,73,A.W1O),A.qZA(),A.TgZ(187,"th",74),A._uU(188,"\u52a8\u4f5c"),A.qZA(),A.TgZ(189,"th",33),A._UZ(190,"i",34),A._uU(191," \u8868\u5355\u56de\u663e\u56de\u8c03 "),A.YNc(192,ye,3,0,"ng-template",null,75,A.W1O),A.qZA(),A.TgZ(194,"th"),A._uU(195,"\u8bf7\u6c42\u65b9\u5f0f"),A.qZA(),A.TgZ(196,"th",64),A._UZ(197,"i",34),A._uU(198," \u63a5\u53e3\u5730\u5740 "),A.YNc(199,we,1,0,"ng-template",null,76,A.W1O),A.qZA(),A.TgZ(201,"th",33),A._UZ(202,"i",34),A._uU(203," \u63d0\u4ea4\u524d\u56de\u8c03 "),A.YNc(204,Je,7,0,"ng-template",null,77,A.W1O),A.qZA(),A.TgZ(206,"th",33),A._UZ(207,"i",34),A._uU(208," \u6210\u529f\u5224\u5b9a "),A.YNc(209,ve,3,0,"ng-template",null,78,A.W1O),A.qZA(),A.TgZ(211,"th",33),A._UZ(212,"i",34),A._uU(213," \u9519\u8bef\u6d88\u606f "),A.YNc(214,Oe,5,0,"ng-template",null,79,A.W1O),A.qZA(),A.TgZ(216,"th"),A._uU(217,"\u64cd\u4f5c\u9879"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(218,"tbody"),A.YNc(219,ke,39,38,"tr",69),A.YNc(220,Pe,5,0,"tr",1),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(221,"nz-modal",80),A.NdJ("nzVisibleChange",function(e){return n.jsonEditDialog.display=e})("nzOnCancel",function(){return n.jsonEditDialog.display=!1})("nzOnOk",function(){return n.jsonEditDialogOk()}),A.YNc(222,Qe,2,3,"ng-container",81),A.qZA(),A.YNc(223,Se,1,4,"x-form-design",82),A.qZA()),2&e){const e=A.MAs(12),t=A.MAs(26),o=A.MAs(55),i=A.MAs(59),r=A.MAs(113),l=A.MAs(138),a=A.MAs(145),s=A.MAs(150),g=A.MAs(181),d=A.MAs(186),c=A.MAs(193),u=A.MAs(200),p=A.MAs(205),f=A.MAs(210),h=A.MAs(215);A.xp6(1),A.Q6J("ngIf",n.showSaveButton),A.xp6(8),A.Q6J("nzSpinning",n.SaveButtonLoading),A.xp6(1),A.Q6J("nzTitle",e),A.xp6(3),A.Q6J("ngIf",n.showSaveButton),A.xp6(5),A.Q6J("ngModel",n.config.serviceUrl.type)("nzButtonStyle","solid"),A.xp6(5),A.Q6J("ngIf","single"==n.config.serviceUrl.type),A.xp6(1),A.Q6J("ngIf","multiple"==n.config.serviceUrl.type),A.xp6(3),A.Q6J("nzTitle",t),A.xp6(1),A.Q6J("ngModel",n.config.create.enabled),A.xp6(2),A.Q6J("disabled",!n.config.create.enabled)("nzDanger",n.errorKeyMap["create.form"]),A.xp6(7),A.Q6J("ngModel",n.config.create.method)("nzButtonStyle","solid"),A.xp6(7),A.ekj("ant-form-item-has-error",n.errorKeyMap["create.url"]),A.xp6(1),A.Q6J("ngModel",n.config.create.url),A.xp6(2),A.Q6J("ngModel",n.config.create.successCondition),A.xp6(2),A.Q6J("ngModel",n.config.create.errorField),A.xp6(2),A.Q6J("nzPopoverContent",o),A.xp6(6),A.Q6J("ngModel",n.config.create.params)("nzAutosize",A.DdM(78,Le)),A.xp6(3),A.Q6J("nzTitle",i),A.xp6(2),A.Q6J("ngModel",n.config.table.search.enabled),A.xp6(2),A.Q6J("disabled",!n.config.table.search.enabled)("nzDanger",n.errorKeyMap["table.search.form"]),A.xp6(9),A.Q6J("ngModel",n.config.table.style.antDesignStyle),A.xp6(7),A.Q6J("ngModel",n.config.table.paging.showPagination),A.xp6(3),A.Q6J("ngModel",n.config.table.paging.serverPagination)("nzDisabled",!n.config.table.paging.showPagination),A.xp6(1),A.ekj("ant-form-item-has-error",n.errorKeyMap["table.paging.pageIndexField"]),A.xp6(1),A.Q6J("ngModel",n.config.table.paging.pageIndexField)("disabled",!n.config.table.paging.showPagination||!n.config.table.paging.serverPagination),A.xp6(1),A.ekj("ant-form-item-has-error",n.errorKeyMap["table.paging.pageSizeField"]),A.xp6(1),A.Q6J("ngModel",n.config.table.paging.pageSizeField)("disabled",!n.config.table.paging.showPagination||!n.config.table.paging.serverPagination),A.xp6(5),A.Q6J("ngModel",n.config.table.request.method)("nzButtonStyle","solid"),A.xp6(7),A.ekj("ant-form-item-has-error",n.errorKeyMap["table.request.url"]),A.xp6(1),A.Q6J("ngModel",n.config.table.request.url),A.xp6(2),A.Q6J("ngModel",n.config.table.request.successCondition),A.xp6(2),A.Q6J("ngModel",n.config.table.request.errorField),A.xp6(1),A.ekj("ant-form-item-has-error",n.errorKeyMap["table.request.dataPath"]),A.xp6(1),A.Q6J("ngModel",n.config.table.request.dataPath),A.xp6(1),A.ekj("ant-form-item-has-error",n.errorKeyMap["table.request.totalPath"]),A.xp6(1),A.Q6J("ngModel",n.config.table.request.totalPath)("disabled",!n.config.table.paging.showPagination||!n.config.table.paging.serverPagination),A.xp6(1),A.Q6J("nzAddOnBefore",r),A.xp6(2),A.Q6J("ngModel",n.config.table.request.lazy),A.xp6(7),A.Q6J("ngModel",n.config.table.request.params)("nzAutosize",A.DdM(79,Le)),A.xp6(5),A.Q6J("ngModel",n.config.table.request.success)("nzAutosize",A.DdM(80,Le)),A.xp6(11),A.Q6J("nzPopoverContent",l),A.xp6(7),A.Q6J("nzPopoverContent",a),A.xp6(5),A.Q6J("nzPopoverContent",s),A.xp6(10),A.Q6J("ngForOf",n.config.table.columns||A.DdM(81,Ae)),A.xp6(2),A.Q6J("ngModel",n.fixedColumnConfig)("nzButtonStyle","solid"),A.xp6(1),A.Q6J("nzValue",0),A.xp6(2),A.Q6J("nzValue",1),A.xp6(2),A.Q6J("nzValue",2),A.xp6(14),A.Q6J("nzPopoverContent",g),A.xp6(5),A.Q6J("nzPopoverContent",d),A.xp6(7),A.Q6J("nzPopoverContent",c),A.xp6(7),A.Q6J("nzPopoverContent",u),A.xp6(5),A.Q6J("nzPopoverContent",p),A.xp6(5),A.Q6J("nzPopoverContent",f),A.xp6(5),A.Q6J("nzPopoverContent",h),A.xp6(8),A.Q6J("ngForOf",n.config.table.buttons),A.xp6(1),A.Q6J("ngIf",0==n.config.table.buttons.length),A.xp6(1),A.Q6J("nzVisible",n.jsonEditDialog.display),A.xp6(2),A.Q6J("ngIf",n.formDesign.display)}},directives:[o.O5,s.ix,w.dQ,y.w,g.Ls,z.W,d.bd,c.Dg,l.JJ,l.On,c.Of,c.Bq,p.Ie,u.gB,u.Zp,l.Fj,T.lU,u.rh,f.i,o.sg,m.du,m.Hf,b.zr,h.Vq,h.Ip,s.fY,M.wA,M.cm,M.RR,V.wO,V.r9,a.Vx],styles:['[_nghost-%COMP%]{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:auto;background:#fff}.toolbar[_ngcontent-%COMP%]{background:#f1f1f1d1;padding:8px;box-shadow:0 0 5px 0 #9e9e9e;z-index:1}.toolbar[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:8px}.container_edit[_ngcontent-%COMP%]{padding:16px;overflow:auto}.container_edit[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%] ~ nz-card[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]     nz-input-group~nz-input-group{margin-top:8px}[_nghost-%COMP%]     .input-group-control{border:1px solid #ddd;border-radius:2px;height:32px;vertical-align:middle;padding:4px 8px;line-height:22px;border-top-left-radius:0;border-bottom-left-radius:0;width:100%}[_nghost-%COMP%]     .input-group-control nz-switch{overflow:hidden;font-size:0}[_nghost-%COMP%]     .ant-form-item-has-error .input-group-control{border-color:#ff4d4f}[_nghost-%COMP%]     .label_width87 .ant-input-group-addon:first-child{width:87px;text-align:center}[_nghost-%COMP%]     .label_width90 .ant-input-group-addon:first-child{width:90px;text-align:center}[_nghost-%COMP%]     .label_width115 .ant-input-group-addon:first-child{width:115px;text-align:center}[_nghost-%COMP%]     .label_width145 .ant-input-group-addon:first-child{width:145px;text-align:center}[_nghost-%COMP%]     .nz_input_group_required .ant-input-group-addon:first-child:before{content:"*";color:red}.fieldset_sm[_ngcontent-%COMP%]{border:1px solid #ddd;padding:4px 8px 8px;box-shadow:3px 3px 3px -3px #ddd}.fieldset_sm[_ngcontent-%COMP%] ~ .fieldset_sm[_ngcontent-%COMP%]{margin-top:16px}.fieldset_sm[_ngcontent-%COMP%] > legend[_ngcontent-%COMP%]{font-size:12px;margin-bottom:0;display:inline-block;background:#0000;width:auto;padding:0 4px;font-weight:700}.intro[_ngcontent-%COMP%]{background:#f7f7f7;border-left:3px solid #cecece;padding:4px 0 4px 4px;margin-bottom:8px}.config-table[_ngcontent-%COMP%]{border:1px solid #ddd;overflow:auto;max-width:100%;display:inline-block;vertical-align:middle}.config-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{max-width:100%;border-collapse:initial;border-spacing:3px;white-space:nowrap}.config-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .config-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{min-width:100px;width:100px}.config-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f3f3f3;border-bottom:1px solid #ddd;font-weight:500;font-size:12px;text-align:center;padding:3px}.config-table[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.config-table[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:0 8px;height:24px;min-height:24px;max-height:24px}.config-table[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.table_btn[_ngcontent-%COMP%]{font-size:20px;position:relative;top:2px;cursor:pointer;color:inherit}.table_btn.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:no-drop}.table_btn[_ngcontent-%COMP%] ~ i[_ngcontent-%COMP%]{margin-left:3px}.table_btn[_ngcontent-%COMP%]:hover{color:#0000007d!important}x-form-design[_ngcontent-%COMP%]{position:absolute;top:-1px;left:0;z-index:4;width:100%;height:100%;overflow:auto;background:#fff}[_nghost-%COMP%]     .ant-card.card-blue{border-color:#91d5ff}[_nghost-%COMP%]     .ant-card.card-blue .ant-card-head{color:#1890ff;background:#e6f7ff;border-color:#91d5ff}[_nghost-%COMP%]     .ant-card.card-geekblue{border-color:#adc6ff}[_nghost-%COMP%]     .ant-card.card-geekblue .ant-card-head{color:#2f54eb;background:#f0f5ff;border-color:#adc6ff}[_nghost-%COMP%]     .ant-card.card-purple{border-color:#d3adf7}[_nghost-%COMP%]     .ant-card.card-purple .ant-card-head{color:#722ed1;background:#f9f0ff;border-color:#d3adf7}.xrequired[_ngcontent-%COMP%]:before{content:"*";color:red}']}),e})(),Fe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-x-page-design"]],decls:1,vars:0,template:function(e,n){1&e&&A._UZ(0,"x-page-design")},directives:[Ke],styles:[""]}),e})();var Be=t(6304),Ee=t(3845);const He=["baseTable"];function Ye(e,n){if(1&e&&(A.TgZ(0,"nz-tag",17),A._uU(1),A.qZA()),2&e){const e=n.$implicit;A.Q6J("nzColor","blue"),A.xp6(1),A.Oqu(e.name)}}function je(e,n){1&e&&A.YNc(0,Ye,2,2,"nz-tag",16),2&e&&A.Q6J("ngForOf",n.$implicit._roleList)}function Ve(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"button",18),A.NdJ("click",function(){const n=A.CHM(e).$implicit;return A.oxw().preview(n)}),A._UZ(1,"i",8),A.TgZ(2,"span"),A._uU(3,"\u9884\u89c8"),A.qZA(),A.qZA(),A._uU(4," \xa0 "),A.TgZ(5,"button",19),A.NdJ("click",function(){const n=A.CHM(e).$implicit;return A.oxw().openEditDialog(n)}),A._UZ(6,"i",20),A.TgZ(7,"span"),A._uU(8,"\u7f16\u8f91"),A.qZA(),A.qZA(),A._uU(9," \xa0 "),A.TgZ(10,"button",21),A.NdJ("nzOnConfirm",function(){const n=A.CHM(e).$implicit;return A.oxw().onDelete(n)}),A._UZ(11,"i",22),A.TgZ(12,"span"),A._uU(13,"\u5220\u9664"),A.qZA(),A.qZA()}if(2&e){const e=n.$implicit;A.Q6J("nzType","default"),A.xp6(5),A.Q6J("nzType","primary")("nzLoading",e._loading),A.xp6(5),A.Q6J("nzPopconfirmTitle","\u5220\u9664\uff1f")}}function $e(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"x-page-design",23),A.NdJ("close",function(n){return A.CHM(e),A.oxw().designClose(n)}),A.qZA()}if(2&e){const e=A.oxw();A.Q6J("config",e.design.config)("SaveButtonLoading",e.design.loading)("showSaveButton",!0)}}const Ie=[{path:"",redirectTo:"role",pathMatch:"full"},{path:"role",component:j},{path:"user",component:oe},{path:"x-form-design",component:ie},{path:"x-page-design",component:Fe},{path:"x-page-list",component:(()=>{class e{constructor(e,n,t,o){var i=this;this.appService=e,this.http=n,this.msg=t,this.toolService=o,this.baseTable=null,this.params={},this.sendCallback=function(){var e=(0,Be.Z)(function*(e){return Object.assign(Object.assign({},e),i.params)});return function(n){return e.apply(this,arguments)}}(),this.successCallback=e=>(this.appService.hasAuth("/systemx-page-list/owner")||(e.data=(e.data||[]).filter(e=>e.createOperatorUsername==this.appService.userInfo.username)),(e.data||[]).forEach(e=>{e._roleList=JSON.parse(e.roleList||"[]")}),e),this.columns=[[{title:"Id",field:"id",fixed:"left"},{title:"\u83dc\u5355\u4f4d\u7f6e",field:e=>JSON.parse(e.menuPathList).map(e=>e.name).join(" / ")},{title:"\u9875\u9762\u540d\u79f0",field:"name"},{title:"\u6240\u5c5e\u89d2\u8272",field:"#role"},{title:"\u72b6\u6001",field:e=>`<span style="color: ${1==e.status?"green":"red"};">${1==e.status?"\u542f\u7528":"\u7981\u7528"}</span>`},{title:"\u521b\u5efa\u4eba",field:e=>`${e.createOperatorName}(${e.createOperatorUsername})`},{title:"\u521b\u5efa\u65f6\u95f4",field:"createTime",pipe:"date"},{title:"\u66f4\u65b0\u4eba",field:e=>e.updateOperatorName?`${e.updateOperatorName}(${e.updateOperatorUsername})`:""},{title:"\u66f4\u65b0\u65f6\u95f4",field:"updateTime",pipe:"date"},{title:"\u64cd\u4f5c\u9879",field:"#btn",fixed:"right",toggleCheckbox:!1}]],this.design={display:!1,rowData:null,config:{},loading:!1}}ngOnInit(){}preview(e){var n;let t=window.location.origin,o=null===(n=document.querySelector("base"))||void 0===n?void 0:n.getAttribute("href"),i=this.toolService.concatUrl(t,o,"/x-page-preview/"+e.id);window.open(i)}openEditDialog(e=null){this.design.rowData=e,e?(e._loading=!0,this.http.get("/xpage/getDetail",{params:{id:e.id}}).subscribe(n=>{e._loading=!1,0==n.code&&(this.design.config=JSON.parse(n.data.config||"{}"),this.design.display=!0)})):(this.design.config={},this.design.display=!0)}designClose({type:e,config:n}){var t=this;return(0,Be.Z)(function*(){if("back"==e)t.design.display=!1;else{let e={name:n.name,menuPathList:JSON.stringify(n.menuPathList),roleList:JSON.stringify(n.roleList),status:n.status,config:JSON.stringify(n)},o=yield t.appService.userInfo;t.design.rowData?(e=Object.assign(Object.assign({},t.design.rowData),e),e.updateOperatorName=o.name,e.updateOperatorUsername=o.username,e.updateTime=+new Date):(e.createOperatorName=o.name,e.createOperatorUsername=o.username,e.createTime=+new Date),t.design.loading=!0,t.http.post("/xpage/save",e).subscribe(e=>{t.design.loading=!1,0==e.code&&(t.msg.success("\u64cd\u4f5c\u6210\u529f"),t.design.display=!1,t.baseTable.reload())})}})()}onDelete(e){this.http.post("/xpage/delete",{id:e.id}).subscribe(e=>{0==e.code&&(this.msg.success("\u64cd\u4f5c\u6210\u529f"),this.baseTable.reload())})}}return e.\u0275fac=function(n){return new(n||e)(A.Y36(q.zi),A.Y36(le.eN),A.Y36(Z.dD),A.Y36(q.oN))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-x-page-list"]],viewQuery:function(e,n){if(1&e&&A.Gf(He,7),2&e){let e;A.iGM(e=A.CRH())&&(n.baseTable=e.first)}},decls:28,vars:11,consts:[["nz-form","",2,"margin-bottom","16px",3,"nzLayout"],["nzAddOnBefore","\u9875\u9762\u540d\u79f0"],["type","text","nz-input","",2,"width","120px",3,"ngModel","ngModelChange"],["nzAddOnBefore","\u72b6\u6001"],["nzAllowClear","",1,"left-radius0",2,"width","120px",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u542f\u7528"],["nzValue","0","nzLabel","\u7981\u7528"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","search"],["nz-button","","nzType","primary","nzGhost","",3,"click"],["nz-icon","","nzType","plus"],["method","get",3,"url","columns","params","success","dataPath","serverPagination"],["baseTable",""],["x-template","role"],["x-template","btn"],[3,"config","SaveButtonLoading","showSaveButton","close",4,"ngIf"],[3,"nzColor",4,"ngFor","ngForOf"],[3,"nzColor"],["nz-button","","nzSize","small",3,"nzType","click"],["nz-button","","nzSize","small","nzGhost","",3,"nzType","nzLoading","click"],["nz-icon","","nzType","form","nzTheme","outline"],["nz-button","","nzDanger","","nzSize","small","nzGhost","","nz-popconfirm","",3,"nzPopconfirmTitle","nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"config","SaveButtonLoading","showSaveButton","close"]],template:function(e,n){if(1&e){const e=A.EpF();A.TgZ(0,"div",0),A.TgZ(1,"nz-form-item"),A.TgZ(2,"nz-form-control"),A.TgZ(3,"nz-input-group",1),A.TgZ(4,"input",2),A.NdJ("ngModelChange",function(e){return n.params.name=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(5,"nz-form-item"),A.TgZ(6,"nz-form-control"),A.TgZ(7,"nz-input-group",3),A.TgZ(8,"nz-select",4),A.NdJ("ngModelChange",function(e){return n.params.status=e}),A._UZ(9,"nz-option",5),A._UZ(10,"nz-option",6),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(11,"nz-form-item"),A.TgZ(12,"nz-form-control"),A.TgZ(13,"button",7),A.NdJ("click",function(){return A.CHM(e),A.MAs(24).reload(!0)}),A._UZ(14,"i",8),A.TgZ(15,"span"),A._uU(16,"\u67e5\u8be2"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(17,"nz-form-item"),A.TgZ(18,"nz-form-control"),A.TgZ(19,"button",9),A.NdJ("click",function(){return n.openEditDialog()}),A._UZ(20,"i",10),A.TgZ(21,"span"),A._uU(22,"\u6dfb\u52a0"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(23,"x-table",11,12),A.YNc(25,je,1,1,"ng-template",13),A.YNc(26,Ve,14,4,"ng-template",14),A.qZA(),A.YNc(27,$e,1,3,"x-page-design",15)}if(2&e){const e=A.MAs(24);A.Q6J("nzLayout","inline"),A.xp6(4),A.Q6J("ngModel",n.params.name),A.xp6(4),A.Q6J("ngModel",n.params.status),A.xp6(5),A.Q6J("nzLoading",e.loading),A.xp6(10),A.Q6J("url","/xpage/list")("columns",n.columns)("params",n.sendCallback)("success",n.successCallback)("dataPath","data")("serverPagination",!1),A.xp6(4),A.Q6J("ngIf",n.design.display)}},directives:[U.Lr,N.SK,U.Nx,N.t3,U.Fd,y.w,u.gB,u.Zp,l.Fj,l.JJ,l.On,h.Vq,h.Ip,s.ix,w.dQ,g.Ls,$.LC,$.C3,o.O5,o.sg,Ee.j,J.JW,Ke],styles:["[_nghost-%COMP%]{height:100%;overflow:auto;position:relative}"]}),e})()}];let Re=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[o.ez,r.m,_,a.xu,i.Bz.forChild(Ie)]]}),e})()}}]);